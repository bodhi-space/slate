<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_making-a-call includes_making-a-call_rds-example">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="bodhi-logo" href="http://docs.bodhi.space"> <img src="../../images/logo.png" /> </a>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <p>[TOC]</p>

<h1 id="mx-rds-api">MX RDS API</h1>

<p>The mxrds api provides a RESTful way to access data stored in Macromatix RDS database</p>

<h2 id="access-control">Access Control</h2>

<p>A Bearer Token is required to make calls to the service, ask the team to generate one for you</p>

<h2 id="store-endpoints">Store endpoints</h2>

<p>Returns store information as well as store roster</p>

<h3 id="get-all-stores">Get all stores</h3>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/&lt;namespace&gt;/stores
</code></pre>

<p>ie.
<code class="prettyprint">
curl -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/stores
</code></p>

<h3 id="get-store-by-store-id">Get store by store id</h3>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/&lt;namespace&gt;/stores/&lt;store-id&gt;
</code></pre>

<p>ie.
<code class="prettyprint">
curl -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/stores/&lt;store-id&gt;
</code></p>

<h3 id="get-store-roster">Get store roster</h3>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/&lt;namespace&gt;/stores/&lt;store-id&gt;/roster
</code></pre>

<p>ie.
<code class="prettyprint">
curl -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/stores/&lt;store-id&gt;/roster
</code></p>

<h2 id="employee-endpoints">Employee endpoints</h2>

<p>Returns employee information</p>

<h3 id="get-all-employees">Get all employees</h3>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/&lt;namespace&gt;/employees
</code></pre>

<p>ie.
<code class="prettyprint">
curl -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/employees
</code></p>

<h3 id="get-employee-by-employee-id">Get employee by employee id</h3>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/&lt;namespace&gt;/employees/&lt;employee-id&gt;
</code></pre>

<p>ie.
<code class="prettyprint">
curl -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/employees
</code></p>

<h2 id="calendar-endpoints">Calendar endpoints</h2>

<p>Returns the fiscal calendar</p>

<h3 id="get-fiscal-calendar-by-year">Get fiscal calendar by year</h3>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/&lt;namespace&gt;/calendar/&lt;year&gt;
</code></pre>

<p>ie.
<code class="prettyprint">
curl -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/calendar/&lt;year&gt;
</code></p>

<h2 id="resources-endpoints">Resources endpoints</h2>

<p>Returns resources filtered by store id and date of business</p>

<h3 id="get-resource-by-store-id-and-date-of-business">Get resource by store id and date of business</h3>

<p>Store is required, DOB will use the current day if not specified</p>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/&lt;namespace&gt;/resources/&lt;resource&gt;?store=&lt;store-id&gt;&amp;dob=&lt;yyyy-mm-dd&gt;
</code></pre>

<h3 id="list-of-resources">List of resources</h3>
<pre class="highlight plaintext"><code>/waste
/transfer
/inventorycount
/forecast
/salesitemforecast
/inventoryforecast
/roster
/salestransaction
/salesitem
/depletion
/schedule
/timecards
/paidinpaidout
/settlement
/storesettlementdetails
</code></pre>

<h2 id="admin-endpoints">Admin endpoints</h2>

<p>These endpoints can only be accessed by the mxrds api admin, they are meant to add or update customer configurations</p>

<h3 id="new-user-config">New user config</h3>
<pre class="highlight plaintext"><code>POST https://api.mxrds.io/&lt;namespace&gt;/settings
</code></pre>

<p>ie.
<code class="prettyprint">
curl -X POST -H &#39;Content-Type:application/json&#39; -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/settings -d &#39;{&quot;token&quot;:&quot;&lt;bearer-token&gt;&quot;,&quot;host&quot;:&quot;&lt;rds-host&gt;&quot;,&quot;port&quot;:&lt;rds-port&gt;,&quot;database&quot;:&quot;&lt;database&gt;&quot;}&#39;
</code></p>

<h5 id="response">response</h5>
<pre class="highlight plaintext"><code>Code 201
</code></pre>

<h3 id="update-existing-config">Update existing config</h3>
<pre class="highlight plaintext"><code>PUT https://api.mxrds.io/&lt;namespace&gt;/settings
</code></pre>

<p>ie.
<code class="prettyprint">
curl -X PUT -H &#39;Content-Type:application/json&#39; -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/settings -d &#39;{&quot;token&quot;:&quot;&lt;bearer-token&gt;&quot;,&quot;host&quot;:&quot;&lt;rds-host&gt;&quot;,&quot;port&quot;:&lt;rds-port&gt;,&quot;database&quot;:&quot;&lt;database&gt;&quot;}&#39;
</code></p>

<h5 id="response">response</h5>
<pre class="highlight plaintext"><code>Code 204
</code></pre>

<h3 id="get-existing-config">Get existing config</h3>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/&lt;namespace&gt;/settings
</code></pre>

<p>ie.
<code class="prettyprint">
curl -H &#39;Authorization:Bearer &lt;admin-token&gt;&#39; https://api.mxrds.io/&lt;namespace&gt;/settings
</code></p>

<h5 id="response">response</h5>
<pre class="highlight plaintext"><code>Code 200 {
  token: &lt;token&gt;,
  host: &lt;host&gt;,
  port: &lt;port&gt;,
  database: &lt;database&gt;
}
</code></pre>

<h2 id="public-endpoints">Public endpoints</h2>

<p>The following endpoints are the only ones that do not require bearer token authorization</p>

<h3 id="healthcheck">Healthcheck</h3>
<pre class="highlight plaintext"><code>GET https://api.mxrds.io/
</code></pre>

<p>ie.
<code class="prettyprint">
curl https://api.mxrds.io/
</code></p>

<h5 id="response">response</h5>
<pre class="highlight plaintext"><code>Code 200
Response {
  ping: true
}
</code></pre>

<h3 id="app-info">App Info</h3>

<p>Returns the name and version of the app
<code class="prettyprint">
GET https://api.mxrds.io/info
</code>
ie.
<code class="prettyprint">
curl https://api.mxrds.io/info
</code></p>

<h5 id="response">response</h5>
<pre class="highlight plaintext"><code>Code 200
Response {
  "name":"&lt;app-name&gt;",
  "version":"&lt;version&gt;"
}
</code></pre>

<h3 id="facts">Facts</h3>

<p>Returns the system and environment information
<code class="prettyprint">
GET https://api.mxrds.io/facts
</code>
ie.
<code class="prettyprint">
curl https://api.mxrds.io/facts
</code></p>

<h5 id="response">response</h5>
<pre class="highlight plaintext"><code>Code 200
Response ie. {
    "os": "Linux",
    "isWindows": false,
    "isMac": false,
    "isLinux": true,
    "isBSD": false,
    "isSolaris": false,
    "platform": "linux/4.4.8-20.46.amzn1.x86_64",
    "title": "rds-api",
    "pid": 16849,
    "hostname": "ip-172-31-10-180",
    "arch": "x64",
    "cpu": "Intel(R) Xeon(R) CPU E5-2650 0 @ 2.00GHz",
    "speed": 1795,
    "cores": 1,
    "ram": 605.948,
    "cwd": "/var/app/current",
    "main": "/var/app/current/index.js",
    "paths": ["/var/app/current/node_modules", "/var/app/node_modules", "/var/node_modules", "/node_modules"],
    "process": "node/v4.4.3",
    "node_env": "not-set",
    "startedAt": "2016-06-14T23:02:19.021Z"
}
</code></pre>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
