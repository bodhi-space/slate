<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="../../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../../../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_bodhimobile includes_bodhimobile_Mobile-20Tools includes_bodhimobile_Mobile-20Tools_performance">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="bodhi-logo" href="http://bodhi-space.github.io/slate/"> <img src="../../../images/logo.png" /> </a>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="performance-tuning-the-app">Performance tuning the app</h1>

<h3 id="overview">Overview</h3>

<p>The Bodhi mobile application is a web application that runs in a native container on the user&rsquo;s mobile device. </p>

<p>This means that, like any web application, it is bound by the same rules and potential inefficiencies of any web application - but exacerbated because the application is now running on a user&rsquo;s mobile device with reduced processing power and limited bandwidth when compared to a regular web application running on a desktop. </p>

<p>When building and testing your application on a WIFI or 4G network it is easy to forget that 3G is the dominant network type globally, so you should assume your app is on a 3G network and that each network request will take, on average, 200 milliseconds.</p>

<p>Additional time needs to be added for the DNS lookup to resolve the hostname (e.g. api.bodhi.space) to an IP address, a subsequent network roundtrip to perform the TCP handshake and a full network roundtrip to send the HTTP request. Finally, add an additional 600ms for the typical sequence of communication between your app and a server, for network overhead. With so much overhead you need to be conscious of simple mistakes that can impact the performance of the application - especially if you are taking an existing web application and moving it to a mobile device.   </p>

<p>You have already made the first major improvement for performance - that is, using the Bodhi cloud as your back end service and working on the data model to collect, pre-process, massage and filter the data so that it is ready to be pulled, served or pushed to your mobile application. </p>

<p>You have built your mobile app and happy with the functionality. So now you are ready to focus on performance testing and tuning of the app.</p>

<p>There are many good articles and books that will help you improve the performance of your web app. We recommend starting with the following:</p>

<ul>
<li><p><strong>High Performance Web Sites</strong>  <a href="hhttp://stevesouders.com/hpws/">here</a>.</p></li>
<li><p><strong>Measuring page load speed with Navigation Timing</strong>  <a href="http://www.html5rocks.com/en/tutorials/webperformance/basics/">here</a>. </p></li>
<li><p><strong>Mobile Analysis in PageSpeed Insights</strong> <a href="https://developers.google.com/speed/docs/insights/mobile">here</a>.</p></li>
</ul>

<p>This article is not intended to cover all aspects of performance optimization but the following exercise will demonstrate the quick wins that you can accomplish by following the best practices discussed in the articles mentioned above. </p>

<h3 id="example-exercise">Example exercise</h3>

<p>The following application is a web application that we will optimize for mobile devices.</p>

<p><img alt="p1" src="../../../images/perf1.png" /></p>

<p>When we run the application we can see that the application takes 1.51 seconds to load. </p>

<p>Looking at the source code we can see that there are several webfonts being loaded - each is a separate request adding 60-70 ms to the load time of the application. On review we see that none of the additional fonts are used in our CSS. So we can remove those.</p>

<p><img alt="p1b" src="../../../images/perf1a.png" /></p>

<p>Note: if you do need to load several fonts, you can do this in one request instead of making multiple individual requests as follows:</p>

<p><link href='http://fonts.googleapis.com/css?family=Lato:100,400|Roboto:400,100' rel='stylesheet' type='text/css'></p>

<p>Running the application we&rsquo;ve saved about 120ms by not loading fonts we don&rsquo;t need.</p>

<p><img alt="p2" src="../../../images/perf2.png" /></p>

<p>The next step makes sure we load the web font before it is required in the CSS file.</p>

<p><img alt="p2" src="../../../images/perf3.png" /></p>

<p><img alt="p2" src="../../../images/perf4.png" /></p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
