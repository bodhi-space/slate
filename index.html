<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["javascript"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="bodhi-logo" href="http://docs.bodhi.space"> <img src="images/logo.png" /> </a>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="hotschedules-iot-platform-for-developers">HotSchedules IoT Platform for Developers</h1>

<p>Restaurant operators need access to data that helps them work more productively and efficiently. Your job is to deliver it.  The HotSchedules IoT Platform for Developers can help you deliver work more productively and efficiently through a set of software modules that collect data from virtually any source in real-time and then deliver select data that is relevant, timely and actionable.</p>

<p>Whether you work for a restaurant, a software company or for yourself - wherever you are, whatever you do - IoT Platform gives you the power to innovate faster and cheaper than ever before.</p>

<h3 id="getting-started">Getting Started</h3>

<p>This documentation is intended for the developer wanting to integrate into the HotSchedules IoT (Internet of Things) Platform by:</p>

<ul>
<li>Building applications to the the HotSchedules IoT Platform Cloud APIs with access to real-time transactional and analytical data.<br></li>
<li>Building mobile/html applications either as standalone html applications or to be part of Bodhi Mobile.  Build applications for restaurants, anywhere and anytime.</li>
<li>Building a data integration application into your point of sale system to be stored and accessed from our cloud solution utilizing a single integration point for data collection</li>
</ul>

<p>The IoT Platform calls accounts <em>namespace</em>. A <em>namespace</em> is your secured storage location of HotSchedules’ cloud solution for your business. Your namespace is uniquely named based on your organization name. When you sign up through the <a href="http://developer.bodhi.space/">HotSchedules IoT Platform Developer Portal</a>, you will be able to create both a namespace and users to access that namespace. </p>

<p>The <a href="http://developer.bodhi.space/">HotSchedules IoT Platform Developer Portal</a> has an easy sign up process to quickly get started developing your application for the IoT Platform.  In just a few short clicks, your IoT platform application development can begin. </p>

          <h1 id="iot-platform-apiserver">IoT Platform APIServer</h1>

<h2 id="overview">Overview</h2>

<p>The HotSchedules IoT Platform APIServer is a set of secure REST APIs that are used to store your data.  </p>

<p>The foundation for this document is the Mongo DB reference located at <a href="http://docs.mongodb.org/manual/reference/operator/">http://docs.mongodb.org/manual/reference/operator/</a>.</p>

<p>Users may be unfamiliar with the REST query syntax. Those familiar with SQL should note that the same types of SQL query operations are possible using the REST API. Users wishing to understand the mapping between SQL queries (SELECT statements) and the Query syntax - should refer to the following document: <a href="http://docs.mongodb.org/manual/reference/sql-comparison/">http://docs.mongodb.org/manual/reference/sql-comparison/</a>.</p>

          <h2 id="getting-started">Getting Started</h2>

<p>To access the HotSchedules IoT Platform Cloud API, you need to login with you user and password which is provided by HotSchedules.  The API docs are available at this location: <a href="https://api.bodhi.space/apidocs/index.html">https://api.bodhi.space/apidocs/index.html</a>.  </p>

<p>If you enter your credentials (username and password) and click Explore, you will see a list of APIs which you can access for your namespace.  The Bodhi Cloud APIs are REST APIs which returns JSON for all responses.  </p>

<p>Each API has examples and an opportunity to <em><em>Try it out!</em></em>.  You can add data using our provided types or create your own type.  NOTE: Should you create your own type, the new type will show up in the API Documentation for your namespace.</p>

<h2 id="logging-in-to-apidocs">Logging In to APIDocs</h2>

<ul>
<li>Go to  <a href="https://api.bodhi.space/apidocs/index.html">https://api.bodhi.space/apidocs/index.html</a></li>
<li>Click Loginform from the list of Bodhi Cloud API docs</li>
<li>Click POST</li>
<li>Enter username</li>
<li>Enter password</li>
<li>Click Try it out!</li>
<li>You should see a Response Code 200</li>
<li>Scroll back to the top of the page and enter your Namespace in the box provided and click Explore </li>
</ul>

<h2 id="exploring-the-apidocs">Exploring the APIDocs</h2>

<p>Once logged into the APIDocs you can both explore the provided types and their respective restful verbs: GET, PUT, DELETE, PATCH. The APIDocs are much more than API Documentation, it is a powerful interactive tool that allows the developer and/or administrator to create, update, delete data as well as manage the schema for their organization.  </p>

<ul>
<li>Click BodhiType</li>
<li>Click GET /resources/BodhiType</li>
<li>Click Try it out!</li>
<li>You can scroll through the Response Body to see all the standard types that the IoT Platform team uses.</li>
</ul>

          <h1 id="getting-started-with-the-hotschedules-iot-platform-rest-api">Getting started with the HotSchedules IoT Platform REST API</h1>

<p>The HotSchedules IoT Platform (Bodhi) REST API allows you to query meta-data about your stores, labor, sales, and HotSchedules Agents running in your stores. You can also do some fancy things like get social information, upload files, send push notifications and emails, and even make payments.</p>

<h3 id="base-url">Base URL</h3>

<p>All URLs referenced in the documentation have the following base:</p>

<p><code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;</code></p>

<p>The Bodhi REST API is served over HTTPS. To ensure data privacy, unencrypted HTTP is not supported.</p>

<h2 id="authenticating-to-the-api">Authenticating to the API</h2>

<p>HTTP requests to the REST API are protected with HTTP Basic and HTTP Cookie authentication.  In short, you will use your HotSchedules IoT Platform account credentials (username and password) for HTTP Basic authentication. If you do not have credentials, you can signup at bodhi.space or directly here https://bodhi.space/signup/ </p>

<p>Syntax:
<code class="prettyprint">curl -ik -u username:password -X GET https://api.bodhi.space/me</code></p>

<p>For example:
<code class="prettyprint">curl -ik -u platform:user -X GET https://api.bodhi.space/me</code></p>

<p>Your results will look like this:<br>
HTTP/1.1 200 OK<br>
Server: nginx/1.8.0<br>
Date: Sat, 21 May 2016 15:22:26 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 456<br>
Connection: keep-alive<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Headers:<br>
Access-Control-Allow-Methods: *<br>
Access-Control-Allow-Origin: 
Access-Control-Expose-Headers: WWW-Authenticate, Server-Authorization, Location<br>
Request-Time: 383<br>
Set-Cookie: RUSK=&ldquo;8a6f98bb1033055fc04d644c0006789335f96c2b-username=platform&rdquo;; Path=/; Domain=.bodhi.space; Secure; HTTPOnly</p>

<p><code class="prettyprint">{&quot;lastName&quot;:&quot;User&quot;,&quot;sys_created_at&quot;:&quot;2016-05-21T15:22:11.157Z&quot;,&quot;authorizations&quot;:[{&quot;namespace&quot;:&quot;bodhi-social&quot;,&quot;read&quot;:true}],&quot;profiles&quot;:[&quot;bodhi-social.user&quot;],&quot;usertype&quot;:&quot;person&quot;,&quot;firstName&quot;:&quot;Platform&quot;,&quot;sys_id&quot;:&quot;57407d23b3b82c51e5cb3afb&quot;,&quot;password&quot;:&quot;$2a$12$C/ZJYSZ4qkR5pU5yHQEkLuvcOVjP4rqLdOHlPq4zcDZt9dcYpBeMC&quot;,&quot;sys_version&quot;:1,&quot;email&quot;:&quot;customercare@hotschedules.com&quot;,&quot;username&quot;:&quot;platform&quot;,&quot;sys_type_version&quot;:12}</code></p>

<p>Next, read the Set-Cookie header to get your cookie string:<br>
<code class="prettyprint">RUSK=&quot;8a6f98bb1033055fc04d644c0006789335f96c2b-username=platform&quot;</code> in the example</p>

<p>Now use the cookie auth to authenticate to the API<br>
<code class="prettyprint">curl -ik --cookie &quot;RUSK=8a6f98bb1033055fc04d644c0006789335f96c2b-username=platform&quot; -X GET https://api.bodhi.space/me</code></p>

<p>Cookie authorization does not expire and can be used to authenticate moving forward.</p>

<p>Once your Organization is setup in the platform (you can signup for free at https://developer.bodhi.space) you can access your data at https://api.bodhi.space/<organization_name> .</p>

<p>So for example, if your organization name is my-deli, your URL would be <code class="prettyprint">https://api.bodhi.space/my-deli</code></p>

<p>Now that you&rsquo;ve authenticated to the API, it&rsquo;s time to look at some data.</p>

<h2 id="making-a-call">Making a call</h2>

<p>The HotSchedules REST API supports all the standard REST verbs<br>
<strong>GET</strong><br>
<strong>POST</strong><br>
<strong>PUT</strong><br>
<strong>PATCH</strong><br>
<strong>DELETE</strong>  </p>

<p>You can access these verbs for each of the types in the HotSchedules system. When an organization is created in the HotSchedules Platform, the organization automatically gets 32 &lsquo;types&rsquo; that will store standard information and data about your organization. Those &#39;types&rsquo; can be viewed and reviewed at <code class="prettyprint">https://api.bodhi.space/apidocs/index.html</code></p>

<h4 id="get">GET</h4>

<p>As an example, let&rsquo;s do a <strong>GET</strong> on a store via CURL
<code class="prettyprint">curl -ik --cookie &quot;RUSK=8a6f98bb1033055fc04d644c0006789335f96c2b-username=platform&quot; -X GET https://api.bodhi.space/bodhi-social/resources/Store</code></p>

<p>This call will return the information about a store that&rsquo;s been created for the bodhi-social organization</p>

<p><code class="prettyprint">[{&quot;sys_version&quot;:1,&quot;image_url&quot;:&quot;https://upload.wikimedia.org/wikipedia/commons/5/54/Golden_Gate_Bridge_0002.jpg&quot;,&quot;sys_type_version&quot;:12,&quot;address&quot;:{&quot;street_address&quot;:&quot;555 Mission&quot;,&quot;extended_address&quot;:&quot;&quot;,&quot;locality&quot;:&quot;San Francisco&quot;,&quot;region&quot;:&quot;CA&quot;,&quot;postal_code&quot;:&quot;94111&quot;,&quot;country&quot;:&quot;US&quot;},&quot;store_hours&quot;:[{&quot;days&quot;:[7,1],&quot;start&quot;:&quot;0500&quot;,&quot;end&quot;:&quot;0000&quot;},{&quot;days&quot;:[1,2],&quot;start&quot;:&quot;1200&quot;,&quot;end&quot;:&quot;0200&quot;},{&quot;days&quot;:[2,3],&quot;start&quot;:&quot;1200&quot;,&quot;end&quot;:&quot;0200&quot;},{&quot;days&quot;:[3,4],&quot;start&quot;:&quot;1200&quot;,&quot;end&quot;:&quot;0200&quot;},{&quot;days&quot;:[4,5],&quot;start&quot;:&quot;1200&quot;,&quot;end&quot;:&quot;0200&quot;},{&quot;days&quot;:[5,6],&quot;start&quot;:&quot;1200&quot;,&quot;end&quot;:&quot;0200&quot;},{&quot;days&quot;:[6,7],&quot;start&quot;:&quot;0500&quot;,&quot;end&quot;:&quot;0000&quot;}],&quot;sys_created_by&quot;:&quot;admin__bodhi-social&quot;,&quot;sys_created_at&quot;:&quot;2016-05-21T15:37:15.560Z&quot;,&quot;name&quot;:&quot;platformstore&quot;,&quot;store_number&quot;:&quot;1&quot;,&quot;display_name&quot;:&quot;Platform Store&quot;,&quot;sys_id&quot;:&quot;574080abb9a19e2dadee775b&quot;}]</code></p>

<p>You can also get the JSON payload by navigating directly to this URL <code class="prettyprint">https://api.bodhi.space/bodhi-social/resources/Store</code>  </p>

<p>You can create your own store for your organization either by executing a <strong>POST</strong> command (see below) to <code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/resources/Store</code> or using our free store manager tool at <code class="prettyprint">https://bodhi.space/store-manager</code> . Either way, a store is a critical anchor for information in the Platform.</p>

<p>Next let&rsquo;s look up a sale for our store in bodhi-social</p>

<p><code class="prettyprint">curl -ik --cookie &quot;RUSK=8a6f98bb1033055fc04d644c0006789335f96c2b-username=platform&quot; -X GET https://api.bodhi.space/bodhi-social/resources/SalesTransaction</code></p>

<p>RESULT:</p>

<p><code class="prettyprint">[{&quot;order_number&quot;:10184,&quot;item_count&quot;:1,&quot;store_id&quot;:&quot;574080abb9a19e2dadee775b&quot;,&quot;employee&quot;:{&quot;id&quot;:&quot;5151&quot;,&quot;name&quot;:&quot;Ted Morrison&quot;},&quot;business_day&quot;:&quot;2016-05-20&quot;,&quot;revenue_center&quot;:{&quot;id&quot;:&quot;2&quot;,&quot;name&quot;:&quot;Restaraunt&quot;},&quot;type&quot;:{&quot;id&quot;:&quot;4&quot;,&quot;name&quot;:&quot;1&quot;},&quot;timestamp&quot;:&quot;2016-05-21T03:34:00.000Z&quot;,&quot;transaction_id&quot;:&quot;557605fc4c32e071180a46042016-05-2010184&quot;,&quot;net_total&quot;:{&quot;value&quot;:325,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;discount_total&quot;:{&quot;value&quot;:0,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;tax_total&quot;:{&quot;value&quot;:23,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;gross_total&quot;:{&quot;value&quot;:348,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;tender_total&quot;:{&quot;value&quot;:348,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;order_opened_at&quot;:&quot;2016-05-21T03:33:00.000Z&quot;,&quot;order_closed_at&quot;:&quot;2016-05-21T03:34:00.000Z&quot;,&quot;guest_count&quot;:1,&quot;sys_version&quot;:1,&quot;sys_created_at&quot;:&quot;2016-05-21T16:02:30.800Z&quot;,&quot;sys_created_by&quot;:&quot;admin__bodhi-social&quot;,&quot;sys_type_version&quot;:12,&quot;sys_id&quot;:&quot;574086965eacd06aa3db036b&quot;}]</code></p>

<p>We can also look up our Store using query parameters in our URL</p>

<p><code class="prettyprint">curl -ik --cookie &quot;RUSK=8a6f98bb1033055fc04d644c0006789335f96c2b-username=platform&quot; -X GET &#39;https://api.bodhi.space/bodhi-social/resources/SalesTransaction&#39; --data-urlencode &#39;where={&quot;business_day&quot;:&quot;2016-05-20&quot;}&#39;</code></p>

<p>RESULT:<br>
<code class="prettyprint">[{&quot;order_number&quot;:10184,&quot;item_count&quot;:1,&quot;store_id&quot;:&quot;574080abb9a19e2dadee775b&quot;,&quot;employee&quot;:{&quot;id&quot;:&quot;5151&quot;,&quot;name&quot;:&quot;Ted Morrison&quot;},&quot;business_day&quot;:&quot;2016-05-20&quot;,&quot;revenue_center&quot;:{&quot;id&quot;:&quot;2&quot;,&quot;name&quot;:&quot;Restaraunt&quot;},&quot;type&quot;:{&quot;id&quot;:&quot;4&quot;,&quot;name&quot;:&quot;1&quot;},&quot;timestamp&quot;:&quot;2016-05-21T03:34:00.000Z&quot;,&quot;transaction_id&quot;:&quot;557605fc4c32e071180a46042016-05-2010184&quot;,&quot;net_total&quot;:{&quot;value&quot;:325,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;discount_total&quot;:{&quot;value&quot;:0,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;tax_total&quot;:{&quot;value&quot;:23,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;gross_total&quot;:{&quot;value&quot;:348,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;tender_total&quot;:{&quot;value&quot;:348,&quot;code&quot;:&quot;USD&quot;,&quot;scale&quot;:2},&quot;order_opened_at&quot;:&quot;2016-05-21T03:33:00.000Z&quot;,&quot;order_closed_at&quot;:&quot;2016-05-21T03:34:00.000Z&quot;,&quot;guest_count&quot;:1,&quot;sys_version&quot;:1,&quot;sys_created_at&quot;:&quot;2016-05-21T16:02:30.800Z&quot;,&quot;sys_created_by&quot;:&quot;admin__bodhi-social&quot;,&quot;sys_type_version&quot;:12,&quot;sys_id&quot;:&quot;574086965eacd06aa3db036b&quot;}]</code></p>

<p>So <code class="prettyprint">https://api.bodhi.space/bodhi-social/resources/SalesTransaction?where={%27business_day%27:%272016-05-20%27}</code> would return all SalesTransaction&rsquo;s for the business day of 2016-05-20.
The URL <code class="prettyprint">https://api.bodhi.space/bodhi-social/resources/SalesTransaction?where={%27store_id%27:%27574080abb9a19e2dadee775b%27}</code> would return all SalesTransaction&rsquo;s for the store 574080abb9a19e2dadee775b (our Platform test store).</p>

<p>All Types can be queried by any parameter within the type using a ?where={} clause. It&rsquo;s <strong>EXTREMELY</strong> important for efficiency and performance to query using indexes on your types. You can review the Types for your organization as well as the Indexes and Parameters by using our free Type Tool located at <code class="prettyprint">https://tools.bodhi.space/types</code> or by inspecting <code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/resources/BodhiType</code></p>

<h4 id="post">POST</h4>

<p>To <strong>POST</strong> to a type you need to add the the header: &#39;Content-Type: application/json&rsquo; to your cURL Command</p>

<p><code class="prettyprint">curl -ik -H &#39;Content-Type: application/json&#39; --cookie &quot;RUSK=8a6f98bb1033055fc04d644c0006789335f96c2b-username=foo&quot; -X POST -d &#39;{
  &quot;store_id&quot;: &quot;l8zeL&quot;,
  &quot;business_day&quot;: &quot;2016-05-13&quot;,
  &quot;timestamp&quot;: &quot;2016-05-12T05:58:31.296Z&quot;,
  &quot;transaction_id&quot;: &quot;FGHG012&quot;,
     &quot;tender_total&quot;: {
      &quot;code&quot;: &quot;USD&quot;,
      &quot;scale&quot;: 2,
      &quot;value&quot;: 620
    }
}&#39; https://api.bodhi.space/&lt;organization_name&gt;/resources/SalesTransaction</code></p>

<p>That command will post the json object to the SalesTransaction type. You can now GET on this type either using cURL or the free query tools available at https://tools.bodhi.space/query</p>

<h4 id="bulk-post">Bulk Post</h4>

<p>All bulk operations are accessible through https://api.bodhi.space<br>
The size limitation for the body is 17MB  </p>

<h3 id="syntax:">Syntax:</h3>

<p><strong>POST</strong> <code class="prettyprint">/&lt;organization_name&gt;/bulk</code> with json body<br>
<code class="prettyprint">{
    &quot;config&quot;: {
        &quot;op&quot;: &quot;insert&quot; or &quot;update&quot; or &quot;upsert&quot; or &quot;invite&quot;,  * see below
         &quot;report&quot;: true,                &lt;- optional, need a report? (default false) 
         &quot;target&quot;: &quot;target_name”      &lt;- the name of the type (not for invite)
    },
    &quot;payload&quot;: [{
        &quot;the_field&quot;: &quot;my first thing to insert or upsert or invite&quot;,
        &quot;other_field&quot;: &quot;the_other_field&quot;
    }, {
        &quot;the_field&quot;: &quot;my second thing to insert or upsert&quot;,
        &quot;other_field&quot;: &quot;the_other_field2&quot;
    }]
}</code>  </p>

<p>The payload varies depending on the type of operation and Returns 202 with header <code class="prettyprint">bulk_id:&lt;the bulk id&gt;</code></p>

<p>The result of a report, if requested, is accessible as soon as the processing is done on:</p>

<p><strong>GET</strong> <code class="prettyprint">/&lt;organization_name&gt;/bulk/&lt;bulk_id&gt;</code></p>

<p><strong>RESPONSE:</strong><br>
returns <strong>200</strong> with a json array body where the order of the cells matches the order of the payload. The report can be accessed only once.<br>
returns <strong>204</strong> if the report is not ready yet<br>
returns <strong>404</strong> if no report was found with that id  </p>

<ul>
<li>update/upsert is only available for types not encapsulated </li>
<li>insert on system types only BodhiUser, BodhiType and BodhiEnumeration and any not encapsulated type</li>
</ul>

<h3 id="example:">Example:</h3>

<p><code class="prettyprint">{
    &quot;config&quot;: {
        &quot;op&quot;: &quot;insert&quot;,
        &quot;report&quot;: true,
        &quot;target&quot;:  &quot;BulkTest&quot;
    },
    &quot;payload&quot;: [{
        &quot;name&quot;: &quot;leo&quot;,
        &quot;other_field&quot;: &quot;mauris non&quot;
    }, {
        &quot;name&quot;: &quot;orci&quot;,
        &quot;other_field&quot;: &quot;sit amet justo&quot;
    }, {
        &quot;name&quot;: &quot;nulla&quot;,
        &quot;other_field&quot;: &quot;pulvinar sed nisl nunc rhoncus&quot;
    }, {
        &quot;name&quot;: &quot;nulla&quot;,
        &quot;other_field&quot;: &quot;diam cras&quot;
    }, {
        &quot;name&quot;: &quot;est&quot;,
        &quot;other_field&quot;: &quot;dui nec nisi volutpat&quot;
    }, {
        &quot;name&quot;: &quot;lorem&quot;,
        &quot;other_field&quot;: &quot;cursus id&quot;
    }, {
        &quot;name&quot;: &quot;molestie&quot;,
        &quot;other_field&quot;: &quot;potenti nullam porttitor lacus at&quot;
    }, {
        &quot;name&quot;: &quot;sapien&quot;,
        &quot;other_field&quot;: &quot;ultrices aliquet maecenas leo&quot;
    }, {
        &quot;name&quot;: &quot;nibh&quot;,
        &quot;other_field&quot;: &quot;consectetuer eget rutrum at&quot;
    }, {
        &quot;name&quot;: &quot;luctus&quot;,
        &quot;other_field&quot;: &quot;nisl nunc&quot;
    }]
}</code></p>

<h4 id="put">PUT</h4>

<p>The HTTP verb PUT can be used on any type as long as there&rsquo;s a unique index on the field or fields. You can always PUT on sys_id</p>

<p>As an example, in the above SalesTransaction example, the sys_id is 574086965eacd06aa3db036b, a PUT to the SalesTransaction based on sys_id would be as follows:</p>

<p><code class="prettyprint">
curl -ik -H &#39;Content-Type: application/json&#39; --cookie &quot;RUSK=8a6f98bb1033055fc04d644c0006789335f96c2b-username=foo&quot; -X PUT -d &#39;{ &quot;store_id&quot;: &quot;l8zeL&quot;, &quot;business_day&quot;: &quot;2016-05-13&quot;, &quot;timestamp&quot;: &quot;2016-05-12T05:58:31.296Z&quot;, &quot;transaction_id&quot;: &quot;FGHG012&quot;, &quot;tender_total&quot;: { &quot;code&quot;: &quot;USD&quot;, &quot;scale&quot;: 2, &quot;value&quot;: 620 } }&#39; https://api.bodhi.space/tutorial/resources/SalesTransaction/574086965eacd06aa3db036b
</code> </p>

<h4 id="put-upsert">PUT Upsert</h4>

<p>Upsert is a safe way to replace an existing record, or POST a record if the entry does not currently exist.</p>

<p>You can upsert by appending your URL with ?upsert=true</p>

<p>As an example, the above PUT example can be changed to a replace by appending the ?upsert=true to the cURL command:</p>

<p><code class="prettyprint">
curl -ik -H &#39;Content-Type: application/json&#39; --cookie &quot;RUSK=8a6f98bb1033055fc04d644c0006789335f96c2b-username=foo&quot; -X PUT -d &#39;{ &quot;store_id&quot;: &quot;l8zeL&quot;, &quot;business_day&quot;: &quot;2016-05-13&quot;, &quot;timestamp&quot;: &quot;2016-05-12T05:58:31.296Z&quot;, &quot;transaction_id&quot;: &quot;FGHG012&quot;, &quot;tender_total&quot;: { &quot;code&quot;: &quot;USD&quot;, &quot;scale&quot;: 2, &quot;value&quot;: 620 } }&#39; https://api.bodhi.space/tutorial/resources/SalesTransaction/574086965eacd06aa3db036b?upsert=true
</code></p>

<h4 id="patch">PATCH</h4>

<p>the HTTP verb PATCH will allow you to alter single parameters or fields within a record in your type. Patch commands follow the following sytax:
[ { &ldquo;op&rdquo;: &ldquo;replace&rdquo;, &ldquo;path&rdquo;: &ldquo;/baz&rdquo;, &ldquo;value&rdquo;: &ldquo;boo&rdquo; }, { &ldquo;op&rdquo;: &ldquo;add&rdquo;, &ldquo;path&rdquo;: &ldquo;/hello&rdquo;, &ldquo;value&rdquo;: [&ldquo;world&rdquo;] }, { &ldquo;op&rdquo;: &ldquo;remove&rdquo;, &ldquo;path&rdquo;: &ldquo;/foo&rdquo;} ]</p>

<p>The HTTP verb PATCH can be used on any type as long as there&rsquo;s a unique index on the field or fields. You can always PATCH on sys_id</p>

<h4 id="delete">DELETE</h4>

<p>the HTTP verb DELETE will allow you to remove a record in your type. DELETE commands follow the following sytax:</p>

<p>To delete multiple records, include a ?where={} in your URL to narrow or expand then number of records removed.</p>

<h4 id="file-upload">File Upload</h4>

<p>The Platform BodhiFileUpload endpoints are special types that allow a user to upload and download any file (like a dbf file from your store&rsquo;s POS).</p>

<p>Metadata of your file is posted to type BodhiFileUpload on successful upload  </p>

<p><strong>BodhiFileUpload example record:</strong><br>
<code class="prettyprint">{ &quot;namespace&quot;: &quot;bodhi&quot;, &quot;original_name&quot;: &quot;profile_pic5.jpg&quot;, &quot;sys_version&quot;: 1, &quot;location&quot;: &quot;bodhi/profile_pic5.jpg&quot;, &quot;uploaded_at&quot;: &quot;2015-09-10T19:42:48+0000&quot;, &quot;sys_created_by&quot;: &quot;admin__bodhi&quot;, &quot;sys_created_at&quot;: &quot;2015-09-10T19:42:49+0000&quot;, &quot;name&quot;: &quot;profile_pic5.jpg&quot;, &quot;media_type&quot;: &quot;image/jpeg&quot;, &quot;sys_id&quot;: &quot;55f1dd39b9b5904f64c8212f&quot; }</code></p>

<p><strong>Examples:</strong><br>
The following are curl examples of how to specify file location in your upload/download/delete commands.  Everything after “upload/” or “download/” in the url is used as the destination.  Note that filename is always specified in the url.  </p>

<p><code class="prettyprint">curl -X POST -u &lt;username&gt;:&lt;password&gt; https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/upload/recipes/food/BurritoRecipe.txt -F &quot;upload1=@THE_FILE&quot;</code>  </p>

<p><code class="prettyprint">curl -X PUT -u &lt;username&gt;:&lt;password&gt; https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/upload/recipes/food/BurritoRecipe.txt -F &quot;upload1=@THE_FILE&quot;</code></p>

<p><strong>Download by path:</strong><br>
<code class="prettyprint">curl -X GET -u &lt;username&gt;:&lt;password&gt; https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/download/recipes/food/BurritoRecipe.txt</code></p>

<p><strong>Download by sys_id:</strong><br>
<code class="prettyprint">curl -X GET -u &lt;username&gt;:&lt;password&gt; https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/download/56f9c2b4fa92ec27934a76ae</code>  </p>

<p><strong>Delete a file:</strong><br>
<code class="prettyprint">curl -X DELETE -u &lt;username&gt;:&lt;password&gt; https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/upload/recipes/food/BurritoRecipe.txt</code></p>

          <h2 id="working-with-labor-data">Working with Labor data</h2>

<p>Storing and accessing labor data is a critical function of the HotSchedule IoT Platform. To access your labor data, you will use the following types:  </p>

<ul>
<li>Store<br></li>
<li>StoreJob<br></li>
<li>Employee<br></li>
<li>EmployeePosition<br></li>
<li>Timecard<br></li>
</ul>

<h3 id="steps-to-create-new-data:">Steps to create new data:</h3>

<ol>
<li>Create a Store<br></li>
<li>Create a StoreJob<br></li>
<li>Create a Employee<br></li>
<li>Create EmployeePosition using the Employee, Store, and StoreJob data<br>

<ul>
<li>Patch Store.employee_ids with the new employee&rsquo;s sys_id<br></li>
<li>Patch Employee.positions with the new EmployeePosition<br></li>
</ul></li>
<li>Create Timecard using EmployeePosition data<br></li>
</ol>

<h4 id="how-does-the-data-map-together?">How does the data map together?</h4>

<p>EmployeePosition is a reference table for looking up stores, employees, jobs, and pay rates.  Ideally, this should be the first place you look for information when querying labor data.</p>

<p>A Store has many employees (Array of sys_ids)
&ndash; Store.employee_ids maps to each Employee.sys_id</p>

<p>&ndash; Example Query: Return all stores that the specified employee is associated with<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/Store?where={&#39;employee_ids&#39;:&#39;&lt;EMPLOYEE_ID&gt;&#39;}</code></p>

<p>A Store has <strong>many</strong> jobs
&ndash;  Store.sys_id maps to StoreJob.store_id</p>

<p>&ndash; Example Query: Return all jobs at a specified store<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/StoreJob?where={&#39;store_id&#39;:&#39;&lt;STORE_ID&gt;&#39;}</code>  </p>

<p>An Employee has many positions (Array of EmployeePosition)</p>

<ul>
<li>Employee.sys_id maps to EmployeePosition.employee_id<br></li>
<li>Employee.name.family_name maps to EmployeePosition.employee_reference.name<br></li>
<li>Employee.external_ids maps to EmployeePosition.employee_reference.id<br></li>
<li>Store.sys_id maps to EmployeePosition.store_id<br></li>
<li>Store.store_number maps to EmployeePosition.store_reference.id<br></li>
<li>Store.name maps to EmployeePosition.store_reference.name<br></li>
<li>StoreJob.sys_id maps to EmployeePosition.job_id<br></li>
<li>StoreJob.instore_id maps to EmployeePosition.job_reference.id<br></li>
<li>StoreJob.instore_name maps to EmployeePosition.job_reference.name<br></li>
</ul>

<p><strong>Example Queries:</strong>  </p>

<p>Return all positions for a specified employee across all stores<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;employee_id&#39;:&#39;&lt;EMPLOYEE_ID&gt;&#39;}</code>  </p>

<p><code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;employee_reference.name&#39;:&#39;&lt;EMPLOYEE_NAME&gt;&#39;}</code>  </p>

<p><code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;employee_reference.id&#39;:&#39;&lt;EMPLOYEE_EXTERNAL_ID&gt;&#39;}</code>  </p>

<p>Return all positions at a specified store across all employees and jobs.<br>
<strong>(NOTE: May include duplicates if employees have multiple positions at the same store)</strong><br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;store_id&#39;:&#39;&lt;STORE_ID&gt;&#39;}</code>  </p>

<p><code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;store_reference.name&#39;:&#39;&lt;STORE_NAME&gt;&#39;}</code>  </p>

<p><code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;store_reference.id&#39;:&#39;&lt;STORE_NUMBER&gt;&#39;}</code>  </p>

<p>Return all employees with a specified job across all stores
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;job_id&#39;:&#39;&lt;JOB_ID&gt;&#39;}</code>  </p>

<p><code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;job_reference.name&#39;:&#39;&lt;JOB_NAME&gt;&#39;}</code>  </p>

<p><code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;job_reference.id&#39;:&#39;&lt;JOB_EXTERNAL_ID&gt;&#39;}</code>  </p>

<p>An Employee has many Stores through EmployeePosition</p>

<ul>
<li>Employee.sys_id maps to EmployeePosition.employee_id</li>
<li>EmployeePosition.store_id maps to Store.sys_id</li>
<li>Therefore: Employee.sys_id maps to Store.sys_id</li>
</ul>

<p>&ndash; Example Query: Return an array of Store.sys_id that the employee works at
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;employee_id&#39;:&#39;&lt;EMPLOYEE_ID&gt;&#39;}&amp;fields=store_id</code></p>

<p>An Employee has many StoreJobs through EmployeePosition</p>

<ul>
<li>Employee.sys_id maps to EmployeePosition.employee_id</li>
<li>EmployeePosition.job_id maps to StoreJob.sys_id</li>
<li>Therefore: Employee.sys_id maps to StoreJob.sys_id</li>
</ul>

<p>&ndash; Example Query: Return an array of StoreJob.sys_id for the specified employee<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/EmployeePosition?where={&#39;employee_id&#39;:&#39;&lt;EMPLOYEE_ID&gt;&#39;}&amp;fields=job_id</code></p>

<p>(Same as the two previous examples)  </p>

<ul>
<li>A Store has many StoreJobs through EmployeePosition</li>
<li>A Store has many Employees through EmployeePosition</li>
<li>A StoreJob has many Employees through EmployeePosition</li>
</ul>

<p>An Employee has many Timecards
* Employee.sys_id maps to Timecard.employee_id
* Employee.external_ids maps to Timecard.employee_reference.id
* Employee.name.family_name maps to Timecard.employee_reference.name</p>

<p>&ndash; Example Query: Return all timecards for a specified employee<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/Timecard?where={&#39;employee_id&#39;: &#39;&lt;EMPLOYEE_ID&gt;&#39;}</code></p>

<p>A Store has many Timecards</p>

<ul>
<li>Store.sys_id maps to Timecard.store_id</li>
<li>Store.store_number maps to Timecard.store_reference.id</li>
<li>Store.name maps to Timecard.store_reference.name</li>
</ul>

<p>&ndash; Example Query:Return all timecards for all employees at a specified store<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/Timecard?where={&#39;store_id&#39;: &#39;&lt;STORE_ID&gt;&#39;}</code></p>

<p>A StoreJob has many Timecards</p>

<ul>
<li>StoreJob.sys_id maps to Timecard.job_id</li>
<li>StoreJob.instore_id maps to Timecard.job_reference.id</li>
<li>StoreJob.instore_name maps to Timecard.job_reference.name</li>
</ul>

<p>&ndash; Example Query:Return all timecards for all employees with the specified job across all stores<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/Timecard?where={&#39;job_id&#39;: &#39;&lt;JOB_ID&gt;&#39;}</code>  </p>

<p>&ndash; Example Query:Return all timecards for all employees with the specified job at a specified store<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/Timecard?where={&#39;job_id&#39;: &#39;&lt;JOB_ID&gt;&#39;, &#39;store_id&#39;: &#39;&lt;STORE_ID&gt;&#39;}</code>  </p>

<p>Employee payment rates:
Base payment rates for a position are defined in the StoreJob type.  When an EmployeePosition is created, the regular, overtime, and double time rates are copied from the StoreJob and adjusted for that employee.  This allows for multiple employees to have the same job, but different payment rates.</p>

          <h2 id="working-with-sales-data">Working with Sales data</h2>

<p>Storing and accessing Sales data is a critical function of the HotSchedule IoT Platform. To access your sales data, you will use the following types:  </p>

<ul>
<li>Store<br></li>
<li>SalesTransaction<br></li>
<li>SalesItem<br></li>
<li>SalesCategory<br></li>
<li>RevenueCenter</li>
</ul>

<h3 id="steps-to-create-new-data:">Steps to create new data:</h3>

<ol>
<li>Create a Store<br></li>
<li>Create a SalesTransaction<br></li>
<li>Create a SalesItem<br></li>
</ol>

<h4 id="how-does-the-data-map-together?">How does the data map together?</h4>

<p>SalesTransaction is a reference table for looking up items sold and the meta data about those items as they refer to a specific order on a specific business day.  Ideally, this should be the first place you look for information when querying Sales data.</p>

<p>A Store has many SalesTransactions<br>
&ndash;  SalesTransaction.store_id maps to Store.sys_id</p>

<p>&ndash; Example Query: Return all SalesTransactions for a store<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesTransaction?where={&#39;store_id&#39;:&#39;&lt;store.sys_id&gt;&#39;}</code></p>

<p>A Store has many SalesItem<br>
&ndash;  SalesItem.store_id maps to Store.sys_id</p>

<p>&ndash; Example Query: Return all SalesItem for a store<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesItem?where={&#39;store_id&#39;:&#39;&lt;store.sys_id&gt;&#39;}</code></p>

<p>A Store has many entries in SalesCategory<br>
&ndash;  SalesCategory.store_id maps to Store.sys_id</p>

<p>&ndash; Example Query: Return all SalesCategories for a store<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesCategory?where={&#39;store_id&#39;:&#39;&lt;store.sys_id&gt;&#39;}</code></p>

<p>A Store has many RevenueCenters<br>
&ndash;  RevenueCenter.store_id maps to Store.sys_id</p>

<p>&ndash; Example Query: Return all RevenueCenters for a store<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/RevenueCenter?where={&#39;store_id&#39;:&#39;&lt;store.sys_id&gt;&#39;}</code></p>

<p>A SalesTransaction has many SalesItems<br>
&ndash;  SalesTransaction.transaction_id maps to SalesItem.transaction_id</p>

<p>&ndash; Example Query: Return all SalesItems for a SalesTransaction<br>
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesTransaction?where={&#39;transaction_id&#39;:&#39;&lt;SalesTransaction.transaction_id&gt;&#39;}</code></p>

<p>A SalesTransaction has a RevenueCenter<br>
&ndash;  SalesTransaction.revenue_center.id maps to RevenueCenter.instore_id<br>
&ndash;  SalesTransaction.revenue_center.name maps to RevenueCenter.display_name  </p>

<p>&ndash; Example Query: Return all SalesTransactions for a RevenueCenter
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesTransaction?where={&#39;revenue_center.id&#39;:&#39;&lt;RevenueCenter.instore_id&gt;&#39;}</code></p>

<p>A SalesTransaction has an Employee<br>
&ndash;  SalesTransaction.employee.id maps to Employee.external_ids.key<br>
&ndash;  SalesTransaction.employee.name maps to Employee.name.formatted_name  </p>

<p>&ndash; Example Query: Return all SalesTransaction for an Employee
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesItems?where={&#39;employee.id&#39;:&#39;&lt;Employee.external_ids.key&gt;&#39;}</code></p>

<p>A SalesTransaction AND SalesItem have a day of business<br>
&ndash; Example Query: Return all SalesTransactions for business day 05/21/2016
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesTransaction?where={&#39;business_day&#39;:&#39;2016-05-21&#39;}</code></p>

<p>&ndash; Example Query: Return all SalesItems for business day 05/21/2016
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesItems?where={&#39;business_day&#39;:&#39;2016-05-21&#39;}</code></p>

<p>A SalesItem has a SalesCategory<br>
&ndash;  SalesItem.sales_category.id maps to SalesCategory.instore_id<br>
&ndash;  SalesItem.sales_category.name maps to SalesCategory.display_name  </p>

<p>&ndash; Example Query: Return all SalesItems for a SalesCategory
<code class="prettyprint">https://api.bodhi.space/&lt;organization_name&gt;/SalesItems?where={&#39;sales_category.id&#39;:&#39;&lt;SalesCategory.instore_id&gt;&#39;}</code></p>

          <h2 id="working-with-hotschedules-data">Working with HotSchedules data</h2>

<p>The HotSchedules REST API provides a user-friendly way to obtain HS Data.  </p>

<h3 id="examples">Examples</h3>

<p>For now, the HotSchedules API username and password must be entered as url parameters hsusr and hspwd respectively. (<strong>Just for demo purposes. This will eventually change.</strong>)  </p>

<p>The url path can look like any of the following, depending on which type is being queried:<br>
<code class="prettyprint">../hotschedules/&lt;concept_id&gt;/&lt;store_id&gt;/&lt;type_method&gt;?</code>  </p>

<p>example:<br>
<code class="prettyprint">../hotschedules/1/1/getDriversByInterval?..</code></p>

<p><code class="prettyprint">../hotschedules/&lt;concept_id&gt;/&lt;type_method&gt;</code></p>

<p>example:<br>
<code class="prettyprint">../hotschedules/1/getStores?..</code>  </p>

<p><code class="prettyprint">../hotschedules/&lt;type_method&gt;</code>  </p>

<p>example:<br>
<code class="prettyprint">../hotschedules/getConcept?..</code></p>

<h4 id="getconcept">getConcept</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/getConcept?hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getdriversbyinterval">getDriversByInterval</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getDriversByInterval?start_day=30&amp;start_month=4&amp;start_year=2016&amp;end_day=5&amp;end_month=5&amp;end_year=2016&amp;volume_type=TABLE&amp;data_type=ACTUAL&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getempavailability">getEmpAvailability</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getEmpAvailability?active_only=true&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getempinfo">getEmpInfo</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getEmpInfo?active_only=true&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getempjobs">getEmpJobs</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getEmpJobs?active_only=true&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getgroups">getGroups</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/getGroups?hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getguestcounts">getGuestCounts</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getGuestCounts?start_date=2016-04-30T00:00:00&amp;end_date=2016-05-03T00:00:00&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h3 id="getlaborbybusday">getLaborByBusDay</h3>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getLaborByBusDay?start_day=30&amp;start_month=1&amp;start_year=2016&amp;end_day=5&amp;end_month=5&amp;end_year=2016&amp;labor_type=optimal&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getlaborbyjobandinterval">getLaborByJobAndInterval</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getLaborByJobAndInterval?start_day=30&amp;start_month=1&amp;start_year=2016&amp;end_day=5&amp;end_month=5&amp;end_year=2016&amp;labor_type=optimal&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getprojectedsales">getProjectedSales</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getProjectedSales?start_day=30&amp;start_month=4&amp;start_year=2016&amp;end_day=5&amp;end_month=5&amp;end_year=2016&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getrcv">getRCV</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getRCV?hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getsalescats">getSalesCats</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getSalesCats?hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getschedule">getSchedule</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getSchedule?start_day=30&amp;start_month=4&amp;start_year=2016&amp;end_day=5&amp;end_month=5&amp;end_year=2016&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getstoreemployees">getStoreEmployees</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getStoreEmployees?active_only=true&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getstorejobs">getStoreJobs</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getStoreJobs?active_only=true&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getstores">getStores</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/getStores?group_id=0&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="gettimecards">getTimeCards</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getTimeCards?start_day=30&amp;start_month=4&amp;start_year=2016&amp;end_day=5&amp;end_month=5&amp;end_year=2016&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

<h4 id="getvolumecounts">getVolumeCounts</h4>

<p><code class="prettyprint">curl -X GET -H &quot;Content-Type:application/json&quot; -u &lt;username&gt;:&lt;password&gt; &quot;https://api.bodhi.space/&lt;organization_name&gt;/controllers/vertx/hotschedules/1/1/getVolumeCounts?start_date=2015-04-30T00:00:00&amp;end_date=2016-05-03T00:00:00&amp;volume_type=TABLE&amp;hsusr=&lt;hs_api_username&gt;&amp;hspwd=&lt;hs_api_password&gt;&quot;</code></p>

          <h2 id="working-with-social-data">Working with Social data</h2>

<p>The HotSchedules REST API provides a user-friendly way to obtain Social data from GooglePlaces,Yelp, and WUnderground.  </p>

<h3 id="api-endpoint">API endpoint</h3>

<p><code class="prettyprint">https://api.bodhi.space/bodhi-social/controllers/vertx/cacheserver?where=&lt;query_json&gt;</code>  </p>

<h4 id="yelp-data">Yelp Data</h4>

<h3 id="yelp-query-format">Yelp query format</h3>

<p>By term and location:<br>
    <code class="prettyprint">{  
       &quot;term&quot;:&lt;search term, for instance KFC, McDonalds etc&gt; - mandatory field
       &quot;location&quot;:&lt;location, for instance Emeryville&gt; - mandatory field
       &quot;limit&quot;:&lt;number of results to return (default:10) - optional field
       &quot;radius&quot;:&lt;search radius in meters&gt; (default:100) - optional field
    }</code></p>

<p>By phone:<br>
<code class="prettyprint">{
   &quot;phone&quot;:&lt;phone number in full format&gt; (for example +15555555555)
}</code></p>

<h3 id="yelp-query-example:">Yelp query example:</h3>

<p>By term and location:<br>
<code class="prettyprint">https://api.bodhi.space/bodhi-social/controllers/vertx/cacheserver/yelp?where={&quot;term&quot;:&quot;KFC&quot;,&quot;location&quot;:&quot;Emeryville&quot;,&quot;limit&quot;:3}</code></p>

<p>By phone:<br>
<code class="prettyprint">https://api.bodhi.space/bodhi-social/controllers/vertx/cacheserver/yelp?where={&quot;phone&quot;:&quot;+15555555555&quot;}</code></p>

<h4 id="wunderground-data">Wunderground Data</h4>

<h3 id="wunderground-query-format:">Wunderground query format:</h3>

<p><code class="prettyprint">{&quot;query&quot;:&lt;query_in_wunderground format&gt;}</code></p>

<p>More details about WU queries could be found here:
<code class="prettyprint">http://www.wunderground.com/weather/api/d/docs?d=data/index</code></p>

<h3 id="wunderground-query-example:">Wunderground query example:</h3>

<p><code class="prettyprint">https://api.bodhi.space/bodhi-social/controllers/vertx/cacheserver/wu?where={&quot;query&quot;:&quot;conditions/q/CA/San_Francisco.json&quot;}</code></p>

<h4 id="googleplaces-data">GooglePlaces data</h4>

<h3 id="google-places-query-example">Google Places query example</h3>

<p><code class="prettyprint">https://api.bodhi.space/bodhi-social/controllers/vertx/cacheserver/googleplaces?where={&quot;query&quot;:&quot;Empire state building&quot;}</code></p>

          <h1 id="agent">Agent</h1>

<h2 id="overview">Overview</h2>

<p>The Agent provides a single integration point that enables in-store and near-store data collection.</p>

<p>The Platform provides real time bi-directional connections between the cloud and POS via
existing Macromatix Livelink and HotSchedules Connect integrations, as well as an
an in-store appliance and software agent.</p>

<p><strong>The IoT Platform is built on open standards and integrates with:</strong></p>

<ul>
<li>In-store data sources, such as POS systems, equipment, scheduling systems (e.g. HotSchedules) and sensors (e.g., thermometers, energy meters, batteries, HVAC)<br></li>
<li>Near-store apps (e.g. Yelp, weather data, traffic data, Facebook) and<br></li>
<li>Above-store apps such as inventory management, ordering systems (e.g.Macromatix), accounting) and other internet connected services<br></li>
</ul>

          <h2 id="getting-started">Getting Started</h2>

<p>HotSchedule IoT Platform Agent provides a single integration point that enables in-store and near-store data collection. HotSchedules IoT Platform Agent is allowed you to integrate with in store data above store data and near store data. </p>

<p><img title="figure  2" alt="alt text" src="images/agentdiagram.png?raw=true" /><br>
figure 2</p>

          <h2 id="environment-setup">Environment Setup</h2>

<h3 id="installation">Installation</h3>

<p>The agent cli is installed via a platform specific installer or via node package manager (NPM). The cli prefers to be installed globally.</p>
<pre class="highlight plaintext"><code>$&gt; npm install -g agent-cli
</code></pre>

<h3 id="general-usage">General Usage</h3>

<p>The general structure of the a command is as follows:</p>
<pre class="highlight plaintext"><code>$&gt; npm install agent-cli [options] &lt;action&gt; [arguments]
</code></pre>

<h3 id="options">Options</h3>

<p>Options are prefixed with <code class="prettyprint">-</code> or <code class="prettyprint">--</code> to separate them from arguments. Each action defines the options it uses, but the options are consistent in naming and usage across the commands.</p>

<h3 id="common-options">Common Options</h3>

<table><thead>
<tr>
<th>long</th>
<th>short</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>&ndash;help</td>
<td>none</td>
<td>none</td>
<td>print help about the command</td>
</tr>
<tr>
<td>&ndash;verbose</td>
<td>-v</td>
<td>none</td>
<td>print more detailed output</td>
</tr>
<tr>
<td>&ndash;quiet</td>
<td>-q</td>
<td>none</td>
<td>print essential output</td>
</tr>
<tr>
<td>&ndash;config</td>
<td>-f</td>
<td>path</td>
<td>specifies the agent&rsquo;s configuration file</td>
</tr>
<tr>
<td>&ndash;home</td>
<td>-h</td>
<td>path</td>
<td>specifies the agent&rsquo;s working directory</td>
</tr>
<tr>
<td>&ndash;force</td>
<td>-F</td>
<td>none</td>
<td>directive to override safety logic</td>
</tr>
</tbody></table>

<h3 id="arguments">Arguments</h3>

<p>The cli interprets the first argument (non-option) as the action. All subseuqent arguements are command specific. </p>

<p>Each action is described below</p>

<h3 id="informational-commands">Informational Commands</h3>

<h3 id="help">help</h3>

<p>The command line provides built in helper functions.</p>

<h3 id="navigation-help">Navigation Help</h3>

<p>For a descriptive list of the commands </p>
<pre class="highlight plaintext"><code>$&gt; npm install agent-cli --help
</code></pre>

<h3 id="action-specific-help">Action Specific Help</h3>

<p>Action specific help can be requested using the following structure.</p>
<pre class="highlight plaintext"><code>$&gt; npm install agent-cli &lt;action&gt; --help
</code></pre>

<h3 id="version">version</h3>

<p>Print version information.</p>
<pre class="highlight plaintext"><code>$&gt; agent-cli --version 
$&gt; agent-cli -V
</code></pre>

<p>The output is a simple version identifier following the semantic versioning rules of major, minor, and build.</p>
<pre class="highlight plaintext"><code>vM.m.b
</code></pre>

<h3 id="info">info</h3>

<p>CLI splash screen for the agent.</p>
<pre class="highlight plaintext"><code>$&gt; agent-cli info
</code></pre>

<h3 id="lifecycle-commands">Lifecycle Commands</h3>

<p>Lifecycle commands allow an administrator to change and check the run state of an agent.</p>

<h3 id="start">start</h3>

<p>Attempts to start an agent.</p>
<pre class="highlight plaintext"><code>$&gt; agent-cli start [options] 
</code></pre>

<h3 id="options">Options</h3>

<table><thead>
<tr>
<th>long</th>
<th>short</th>
<th>arg</th>
<th>deacription</th>
</tr>
</thead><tbody>
<tr>
<td>&ndash;verbose</td>
<td>-v</td>
<td>none</td>
<td>print more detailed output</td>
</tr>
<tr>
<td>&ndash;quiet</td>
<td>-q</td>
<td>none</td>
<td>print essential output</td>
</tr>
<tr>
<td>&ndash;config</td>
<td>-f</td>
<td>path</td>
<td>specifies the agent&rsquo;s configuration file</td>
</tr>
<tr>
<td>&ndash;home</td>
<td>-h</td>
<td>path</td>
<td>specifies the agent&rsquo;s working directory</td>
</tr>
</tbody></table>

<h3 id="status">status</h3>

<p>Provides status about a running agent.</p>
<pre class="highlight plaintext"><code>$&gt; agent-cli status [options] 
</code></pre>

<h3 id="options">Options</h3>

<table><thead>
<tr>
<th>long</th>
<th>short</th>
<th>arg</th>
<th>deacription</th>
</tr>
</thead><tbody>
<tr>
<td>&ndash;verbose</td>
<td>-v</td>
<td>none</td>
<td>print more detailed output</td>
</tr>
<tr>
<td>&ndash;quiet</td>
<td>-q</td>
<td>none</td>
<td>print essential output</td>
</tr>
<tr>
<td>&ndash;config</td>
<td>-f</td>
<td>path</td>
<td>specifies the agent&rsquo;s configuration file</td>
</tr>
</tbody></table>

<h3 id="stop">stop</h3>

<p>Gracefully shutdown the agent.</p>
<pre class="highlight plaintext"><code>$&gt; agent-cli stop [options] 
</code></pre>

<h3 id="options">Options</h3>

<table><thead>
<tr>
<th>long</th>
<th>short</th>
<th>arg</th>
<th>deacription</th>
</tr>
</thead><tbody>
<tr>
<td>&ndash;verbose</td>
<td>-v</td>
<td>none</td>
<td>print more detailed output</td>
</tr>
<tr>
<td>&ndash;quiet</td>
<td>-q</td>
<td>none</td>
<td>print essential output</td>
</tr>
<tr>
<td>&ndash;config</td>
<td>-f</td>
<td>path</td>
<td>specifies the agent&rsquo;s configuration file</td>
</tr>
</tbody></table>

<h3 id="diagnostic-commands">Diagnostic Commands</h3>

<p>Diagnostic commands are used by an admin to troubleshoot an agent having trouble entering a running state or to test environmental specific details uniformly across platforms.</p>

<h3 id="check-core">check-core</h3>

<p>Used to check the version of agent-core being used and where that file is located on the file system.</p>
<pre class="highlight plaintext"><code>$&gt; agent-cli check-core [options]
</code></pre>

<h3 id="options">Options</h3>

<table><thead>
<tr>
<th>long</th>
<th>short</th>
<th>arg</th>
<th>deacription</th>
</tr>
</thead><tbody>
<tr>
<td>&ndash;config</td>
<td>-f</td>
<td>path</td>
<td>specifies the agent&rsquo;s configuration file</td>
</tr>
</tbody></table>

<h3 id="check-config">check-config</h3>

<p>Used to check for configuration problems in the agent. The agent will load and process all configuration files, but will not enter into a ready state. This command is safe to run even if there is a currently running agent.</p>
<pre class="highlight plaintext"><code>$&gt; agent-cli check-cofig [options]
</code></pre>

<h3 id="options">Options</h3>

<table><thead>
<tr>
<th>long</th>
<th>short</th>
<th>arg</th>
<th>deacription</th>
</tr>
</thead><tbody>
<tr>
<td>&ndash;config</td>
<td>-f</td>
<td>path</td>
<td>specifies the agent&rsquo;s configuration file</td>
</tr>
</tbody></table>

<h3 id="check-connection">check-connection</h3>

<p>Used to check for configuration problems in the agent.</p>
<pre class="highlight plaintext"><code>$&gt; agent-cli check-connection [options]
</code></pre>

<h3 id="options">Options</h3>

<table><thead>
<tr>
<th>long</th>
<th>short</th>
<th>arg</th>
<th>deacription</th>
</tr>
</thead><tbody>
<tr>
<td>&ndash;config</td>
<td>-f</td>
<td>path</td>
<td>specifies the agent&rsquo;s configuration file</td>
</tr>
</tbody></table>

<p>The provided URL will go through the following checks:</p>

<ol>
<li>Check the URL format</li>
<li>Check the DNS resolution from the agent&rsquo;s host</li>
<li>Check the TCP port is reachable by opening up a connection on host:port</li>
<li>Issue a HTTP GET against the ping endpoint of the system</li>
</ol>

<h3 id="check-route">check-route</h3>

<p>Used to check for network problems (firewalls &amp; proxy rules) from the perspective of the agent runtime. </p>
<pre class="highlight plaintext"><code>$&gt; agent-cli check-route &lt;scheme://host:port/path&gt;
</code></pre>

<p>The provided URL will go through the following checks:</p>

<ol>
<li>Parse</li>
<li>DNS resolve of host/IP</li>
<li>TCP port reachable by opening up a connection on host:port</li>
<li>If scheme is http of https then issue a HTTP GET against the specified URL</li>
</ol>

          <h2 id="how-to">How To</h2>

<h4 id="installing-bodhi-agent">Installing Bodhi Agent</h4>

<p><strong>Agent Installer and Registration User Guide</strong></p>

<p>Welcome to the User Guide for Installing and registering the Bodhi agent</p>

<p><strong>System Requirements for computer</strong>
OS: Windows XP SP3, Windows 7, Windows 8.1<br>
Memory: 2GB or more<br>
Disk Space: 10 GB  </p>

<p><strong>System requirements for Mobile</strong>
iOS 7.x, 8.x<br>
Android 4.x<br>
Windows Phone</p>

<h5 id="step-1:-download-bodhi-installer-and-the-bodhi-mobile-application">Step 1: Download Bodhi Installer and the Bodhi Mobile Application</h5>

<p>Go <a href="http://developer.bodhi.space">developer.bodhi.space</a> to get the correct installer for your system</p>

<p><img alt="alt text" src="images/agent_dl_01.png?raw=true" /></p>

<p><strong>NOTE:</strong> if the system you are using to download the installer is not a Windows system you will get the Not Supported.</p>

<p>Just select the Windows system that matches the system you will be installer the Bodhi Agent on.</p>

<p>For the mobile applications here is where you can download them to your device.</p>

<p>Bodhi Mobile - iOS          Apple Apps Store<br>
Bodhi Mobile - Android      Google Play Store</p>

<h5 id="step-2:-run-the-installer">Step 2:  Run the installer</h5>

<ul>
<li>You will be presented with the Installer Welcome screen.<br></li>
<li>This will show the version number of the installer</li>
</ul>

<p><img alt="alt text" src="images/agent_ver_01.png?raw=true" />  </p>

<h5 id="step-3:-select-the-next-button-to-move-to-the-next-button">Step 3: Select the Next button to move to the next Button</h5>

<p><img alt="alt text" src="images/agent_inst_01.png?raw=true" />  </p>

<h5 id="step-4:-license-agreement-screen">Step 4:  License agreement screen</h5>

<ul>
<li>The user needs to agree to the user agreement before proceeding.</li>
</ul>

<p><img alt="alt text" src="images/agent_legal_01.png?raw=true" />  </p>

<p><strong>NOTE:</strong> the Next Button will be greyed out, until the, I accept the agreement radio button is selected.</p>

<h5 id="step-5:-select-the-i-accept-the-agreement-radio-button">Step 5:  Select the I accept the agreement Radio Button</h5>

<p><img alt="alt text" src="images/agent_legal_02.png?raw=true" />  </p>

<h5 id="step-6:-select-the-next-button">Step 6: Select the Next Button</h5>

<p><img alt="alt text" src="images/agent_legal_03.png?raw=true" />  </p>

<h5 id="step-7:-selecting-the-destination-location-for-the-agent">Step 7:  Selecting the Destination location for the Agent</h5>

<ul>
<li>A default destination location is already provided for the agent. </li>
</ul>

<p><img alt="alt text" src="images/agent_dest_01.png?raw=true" />  </p>

<p><strong>NOTE:</strong> If this destination location is OK, then select the Next Button.  </p>

<p><img alt="alt text" src="images/agent_dest_02.png?raw=true" />  </p>

<p><strong>Go to Step 8</strong></p>

<h6 id="step-7a:-if-you-wish-to-change-the-location-of-the-destination-location">Step 7a: If you wish to change the location of the destination location</h6>

<h6 id="7a.-select-the-browse-button">7a. Select the Browse Button</h6>

<p><img alt="alt text" src="images/agent_dest_03.png?raw=true" /></p>

<h6 id="7b.-select-the-folder-you-wish-to-install-the-bodhi-agent-into-or-you-can-open-a-different-folder.">7b. Select the folder you wish to install the Bodhi Agent into or you can open a different folder.</h6>

<p><img alt="alt text" src="images/agent_dest_04.jpg?raw=true" />  </p>

<h6 id="7c.-after-you-have-selected-the-folder">7c. After you have selected the folder</h6>

<p><img alt="alt text" src="images/agent_dest_05.jpg?raw=true" /></p>

<h6 id="7d.-select-the-ok-button">7d. Select the OK Button</h6>

<p><img alt="alt text" src="images/agent_dest_06.jpg?raw=true" />  </p>

<p>The New destination location should be displayed  </p>

<p><img alt="alt text" src="images/agent_dest_01.png?raw=true" /> </p>

<h6 id="7e.-select-the-next-button-to-continue">7e. Select the Next Button to continue</h6>

<p><img alt="alt text" src="images/agent_dest_02.png?raw=true" />  </p>

<h5 id="step-8:-review-of-destination-location.">Step 8: Review of Destination location.</h5>

<ul>
<li>The destination location for the install is displayed.</li>
</ul>

<p><img alt="alt text" src="images/agent_install_01.png?raw=true" /> </p>

<h5 id="step-9:-select-the-install-button">Step 9: Select the Install Button</h5>

<ul>
<li>If the Destination location is correct, then </li>
<li>Select the Install Button</li>
</ul>

<p><img alt="alt text" src="images/agent_install_02.png?raw=true" /> </p>

<h5 id="9a.-a-progress-bar-will-be-displayed">9a. A Progress bar will be displayed</h5>

<p><img alt="alt text" src="images/agent_install_03.png?raw=true" />  </p>

<h5 id="step-10:-installing-nodejs-page">Step 10: Installing Nodejs page</h5>

<ul>
<li>After the Setup Wizard has completed installing the agent and it parts, the installer for NodeJS is started.</li>
</ul>

<p><img alt="alt text" src="images/node_splash_1.png?raw=true" /></p>

<h5 id="step-11:-selecting-the-next-button">Step 11: Selecting the Next Button</h5>

<ul>
<li>Select the Next button to continue the install of Nodejs.</li>
</ul>

<p><img alt="alt text" src="images/node_splash_2.png?raw=true" />  </p>

<h5 id="step-12:-license-agreement-screen">Step 12:  License agreement screen</h5>

<ul>
<li>The user needs to agree to the user agreement before proceeding </li>
</ul>

<p><img alt="alt text" src="images/node_license_1.png?raw=true" />  </p>

<p><strong>NOTE:</strong> the Next Button will be greyed out, until the, I accept the agreement checkbox is selected.</p>

<h5 id="step-13:-select-the-i-accept-the-agreement-radio-button">Step 13:  Select the I accept the agreement Radio Button</h5>

<p><img alt="alt text" src="images/node_license_2.png?raw=true" />  </p>

<h5 id="step-14:-select-the-next-button">Step 14: Select the Next Button</h5>

<p><img alt="alt text" src="images/node_license_3.png?raw=true" />  </p>

<h5 id="step-15:-selecting-the-destination-location-for-nodejs">Step 15: Selecting the Destination location for Nodejs</h5>

<ul>
<li>A default destination location is already provided for Nodejs. </li>
</ul>

<p><img alt="alt text" src="images/node_dest_1.png?raw=true" />  </p>

<p><strong>NOTE:</strong> If this destination location is OK, then select the Next Button.  </p>

<p><img alt="alt text" src="images/node_dest_3.png?raw=true" /></p>

<p><strong>Go to Step 16</strong></p>

<h6 id="step-15a:-if-you-wish-to-change-the-location-of-the-destination-location,-select-the-change-button">Step 15a: If you wish to change the location of the destination location, Select the change Button</h6>

<p><img alt="alt text" src="images/node_dest_2.png?raw=true" />  </p>

<h6 id="step-15b.-select-the-folder-you-wish-to-install-nodejs-into-or-you-can-open-a-different-folder">Step 15b. Select the folder you wish to install nodejs into or you can open a different folder</h6>

<p><img alt="alt text" src="images/node_dest_4.png?raw=true" /></p>

<h6 id="step-15c.-after-you-have-selected-the-new-folder">Step 15c. After you have selected the new folder</h6>

<p><img alt="alt text" src="images/node_dest_5.png?raw=true" /></p>

<h6 id="step-15d.-after-you-have-selected-the-folder-in-the-new-selected-folder">Step 15d. After you have selected the folder in the new selected folder</h6>

<p><img alt="alt text" src="images/node_change_dest_folder_1.png?raw=true" /></p>

<h6 id="step-15e.-select-the-ok-button">Step 15e. Select the OK Button</h6>

<p><img alt="alt text" src="images/node_change_3.png?raw=true" /></p>

<h6 id="step-15f.-review-the-destination-location">Step 15f. Review the Destination location</h6>

<p><img alt="alt text" src="images/node_dest_1.png?raw=true" /> </p>

<h5 id="step-16:-review-of-the-custom-setup.">Step 16: Review of the Custom Setup.</h5>

<ul>
<li>The Custom Setup page for the install is displayed.</li>
</ul>

<p><img alt="alt text" src="images/nodejs_custom_1.png?raw=true" /> </p>

<h5 id="step-17:-select-the-install-button">Step 17: Select the Install Button</h5>

<ul>
<li>If all the information is correct, then </li>
<li>Select the Install Button</li>
</ul>

<p><img alt="alt text" src="images/nodejs_install_1.png?raw=true" /> </p>

<h6 id="15h.-a-progress-bar-will-be-displayed">15h. A Progress bar will be displayed</h6>

<p><img alt="alt text" src="images/nodejs_progress_1.png?raw=true" />  </p>

<h5 id="step-16:-completing-the-hotschedules-link-setup-wizard-page">Step 16: Completing the HotSchedules Link Setup Wizard page</h5>

<ul>
<li>After the Setup Wizard has completed, a checkbox is presented, by default it is selected.</li>
</ul>

<p><img alt="alt text" src="images/agent_run_01.png?raw=true" /></p>

<h5 id="10a.-completing-the-hotschedules-link-install">10a. Completing the HotSchedules Link install</h5>

<ul>
<li>If no change is required, then Select the Finish Button<br></li>
</ul>

<p><img title="figure 19" alt="alt text" src="images/agent_finished_01.png?raw=true" /><br>
figure 19  </p>

<h5 id="10b.-command-line-interface-is-opened">10b. Command Line Interface is opened</h5>

<ul>
<li>A Diagnostics is run</li>
<li>The Windows Service is started</li>
<li>Follow the instructions to press any key to continue </li>
</ul>

<p><img title="figure 20" alt="alt text" src="images/agent_any_01.png?raw=true" /><br>
figure 20  </p>

<h5 id="10c.-the-command-line-window-should-close-and-you-will-be-at-the-desktop.">10c.  The command line window should close and you will be at the Desktop.</h5>

<p><img title="figure 21" alt="alt text" src="images/agent_desktop_01.png?raw=true" /><br>
figure 21  </p>

<h5 id="step-1:-register-the-agent-with-a-mobile-device">Step 1: Register the Agent with a Mobile Device</h5>

<ul>
<li>If you had selected to start the console at the end of the install, then the console will be started in the default browser.</li>
</ul>

<p><strong>Note:</strong> If your agent is not registered, it will be unable to send any data to the cloud</p>

<ul>
<li>A Registration Code will be displayed which is used to register the POS with the Mobile Device.</li>
</ul>

<p><img title="figure 22" alt="alt text" src="images/agent_active_01.png?raw=true" /><br>
figure 22  </p>

<p><strong>Note:</strong>  If the registration dialog is dismissed before registration
* Select the Registration Code Menu item on the left to redisplay it</p>

<p><img title="figure 23" alt="alt text" src="images/agent_reg_01.png?raw=true" /><br>
figure 23  </p>

<h5 id="step-2:-start-the-bodhi-mobile-app">Step 2: Start the Bodhi Mobile App</h5>

<ul>
<li>This is the Mobile Application that was downloaded earlier to your Mobile Device</li>
</ul>

<p><img title="figure 23" alt="alt text" src="images/iphone_home_01.png?raw=true" /><br>
figure 24  </p>

<h5 id="step-3:-enter-the-a-mobile-device">Step 3: Enter the a Mobile Device</h5>

<ul>
<li>Enter the UserID </li>
<li>Enter the Password </li>
<li>Select the Log in Button</li>
</ul>

<p><img title="figure 25" alt="alt text" src="images/app_login_01.png?raw=true" /><br>
figure 25  </p>

<h5 id="step-4:-select-the-pos-manager">Step 4: Select the POS Manager</h5>

<p><img title="figure 26" alt="alt text" src="images/pos_mgr_01.png?raw=true" /><br>
figure 26  </p>

<h5 id="step-5:-select-the-the-plus-sign-to-add-a-pos-to-the-manager">Step 5: Select the the Plus Sign to add a POS to the Manager</h5>

<p><img title="figure 27" alt="alt text" src="images/pos_mgr_02.png?raw=true" /><br>
figure 27  </p>

<h5 id="step-6:-select-a-store-to-associate-the-pos-with.">Step 6: Select a store to associate the POS with.</h5>

<p><img title="Flowers" alt="Flowers" src="images/pos_mgr_03.png?raw=true" />
figure 28  </p>

<h5 id="step-7:-enter-the-activation-code-that-is-displayed-in-the-browser.">Step 7: Enter the Activation code that is displayed in the Browser.</h5>

<p><img title="figure 29" alt="alt text" src="images/agent_active_02.png?raw=true" /><br>
figure 29  </p>

<h5 id="step-8:-select-the-request-button.">Step 8: Select the Request Button.</h5>

<p><img title="figure 30" alt="alt text" src="images/agent_active_03.png?raw=true" /><br>
figure 30  </p>

<h5 id="step-9:-verify-that-pos-agent-with-the-selected-store-and-is-displayed">Step 9: Verify that POS agent with the selected store and is displayed</h5>

<p><img title="figure 31" alt="alt text" src="images/agent_active_04.png?raw=true" /><br>
figure 31  </p>

<h5 id="step-20:-the-browser-will-display-the-console-dashboard">Step 20: The Browser will display the console dashboard</h5>

<ul>
<li>A Success message will briefly flash on the screen</li>
<li>The Registration Code Menu item will be removed</li>
<li>The Dashboard will be displayed</li>
</ul>

<p><img title="figure 32" alt="alt text" src="images/agent_console_01.png?raw=true" /><br>
figure 32  </p>

<h3 id="console-dashboard-legend">Console Dashboard Legend</h3>

<ol>
<li>This is the status of the agent (e.g. Online, Offline)<br></li>
<li>This changes the Left Menu from Icon Only to Icons and Text<br></li>
</ol>

<p><strong>Congratulations on your successful installation of Bodhi Agent</strong></p>

          <h2 id="tooling">Tooling</h2>

<h4 id="agent-console">Agent Console</h4>

<p>The Agent Console is the application that users can use to manage their Agent&rsquo;s functionality and settings. The following sections describe how to use the Agent Console.</p>

<h3 id="getting-started">Getting Started</h3>

<p>The Agent must be running for you to access the Agent Console. You can access the Agent Console by going to <a href="http://localhost:4444">http://localhost:4444</a> in your browser. If you installed the Agent for the first time, the console will automatically start if you selected the &ldquo;Start Console&rdquo; option during the installation.</p>

<p><em>Note: Agent Console works best in Google Chrome or Mozilla Firefox.</em></p>

<h3 id="registering-your-agent">Registering Your Agent</h3>

<p>Upon entering the console for the first time, you should see a registration token pop up. This six-digit registration code needs to be entered into your Bodhi Mobile App to connect your Agent to your Bodhi Mobile App and to the Bodhi Cloud. Once you&rsquo;ve successfully entered the token into the Bodhi Mobile App, the window will display a &ldquo;SUCCESS&rdquo; message and close. </p>

<p><strong>Important</strong>: If the window pops up and you don&rsquo;t see a token, wait 10 seconds and refresh your browser. If the window doesn&rsquo;t pop up, click on the Registration Code link (see circle #1)in the left navigation bar to open the window.</p>

<p><img alt="image" src="http://redbookconnect.github.io/docs/console/registrationcode.png" /></p>

<p><em>The registration code should be entered in your Bodhi Mobile App.</em></p>

<h3 id="dashboard">Dashboard</h3>

<p>The Dashboard displays Agent software updates, your installed Agent Apps, and Customer Support information. </p>

<p>Note that clicking the three lines next to the Bodhi Agent icon (see circle #1) will enable you to minimize or expand the navigation bar.</p>

<p>In the top right corner, you can see the Agent&rsquo;s connection status to the Internet (either Online or Offline, see circle #2).</p>

<p><img alt="image" src="http://redbookconnect.github.io/docs/console/dashboard.png" />
<em>Screenshot: Agent Console Dashboard Page</em></p>

<h3 id="integration-apps">Integration Apps</h3>

<p>On the Integration Apps page, you can view and install Agent Apps that are available in the Bodhi App Store. You can install apps with one click by clicking the &ldquo;Install Now&rdquo; button. Upon clicking it, the app will start installing. When it has finished installing, you will see a green &ldquo;Installed&rdquo; button.</p>

<p><em>Note: If you receive an red error message, then the App could not be found. Make sure you are connected to the internet and if you continue to have errors, contact Customer Support.</em></p>

<p><img alt="image" src="http://redbookconnect.github.io/docs/console/integrationapps.png" />
<em>Screenshot: Agent Console Integration Apps Page</em></p>

<h3 id="settings">Settings</h3>

<p>On the Settings page, you can change settings that will determine how your Agent operates.</p>

<table><thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Agent Name</td>
<td>Changes the Agent&rsquo;s name</td>
</tr>
<tr>
<td>Role</td>
<td>Determines the package bundles that the Agent will install</td>
</tr>
<tr>
<td>Timezone</td>
<td>Sets the timezone</td>
</tr>
<tr>
<td>Currency</td>
<td>Sets the currency for your Store</td>
</tr>
</tbody></table>

<p><img alt="image" src="http://redbookconnect.github.io/docs/console/agentsettings.png" />
<em>Screenshot: Agent Console Settings Page</em></p>

<h3 id="connection">Connection</h3>

<p>The Connection page displays important information about the Agent&rsquo;s connection details. The Connection panel displays connection status information for the Agent and the right-hand panel lists the connection protocols available to the Agent.</p>

<table><thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Status</td>
<td>Displays the Agent&rsquo;s connection to the Internet (Online/Offline)</td>
</tr>
<tr>
<td>Base</td>
<td>Lists the full URI path to the Bodhi Cloud</td>
</tr>
<tr>
<td>Endpoint URL</td>
<td>Lists the Endpoint URL that the Agent is connected to</td>
</tr>
<tr>
<td>Online Since</td>
<td>Lists the date &amp; time since the Agent has been running</td>
</tr>
<tr>
<td>Interruptions</td>
<td>Lists the number of times the Agent had interrupted connections to the Internet</td>
</tr>
</tbody></table>

<p><img alt="image" src="http://redbookconnect.github.io/docs/console/connection.png" />
<em>Screenshot: Agent Console Connection Page</em></p>

<h3 id="about">About</h3>

<p>The About page displays information about your Agent&rsquo;s status. The Bodhi Agent panel lists information about your Agent&rsquo;s identity and structure, and the right-hand panel lists the plug-ins that are available to your Agent.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Status</td>
<td>Displays the Agent&rsquo;s connection to the Internet (Online/Offline)</td>
</tr>
<tr>
<td>Name</td>
<td>Your Agent&rsquo;s display name</td>
</tr>
<tr>
<td>Version</td>
<td>The version number of the Agent</td>
</tr>
<tr>
<td>Agent Directory</td>
<td>Lists the directory path where the Agent is installed</td>
</tr>
<tr>
<td>Namespace</td>
<td>Your identifying space in the HS Bodhi Cloud</td>
</tr>
<tr>
<td>Agent ID</td>
<td>The unique identifier for the Agent</td>
</tr>
<tr>
<td>Authorization</td>
<td>Displays whether your Agent is authorized to connect to Bodhi Cloud <em>(checkmark means authorized)</em></td>
</tr>
<tr>
<td>Assigned</td>
<td>Displays whether your Agent has been assigned a Store in the Bodhi Cloud <em>(checkmark means assigned)</em></td>
</tr>
<tr>
<td>Extensions</td>
<td>Lists the extensions available to the Agent (see <a href="http://redbookconnect.github.io/slate/#extending-the-agent">Extensions</a>)</td>
</tr>
<tr>
<td>Services</td>
<td>Lists the services implemented within the Agent</td>
</tr>
<tr>
<td>Handlers</td>
<td>Lists the event handlers implemented in the Agent</td>
</tr>
<tr>
<td>Dependencies</td>
<td>Lists the NPM packages that the Agent is dependent upon</td>
</tr>
</tbody></table>

<p><img alt="image" src="http://redbookconnect.github.io/docs/console/about.png" /> 
<em>Screenshot: Agent Console About Page</em></p>

          <h4 id="agent-cli">Agent-CLI</h4>

<p>The agent-cli provides administrators, support team members, and developers a tool for interacting with an agent.</p>

<h5 id="general-usage">General Usage</h5>

<p>The general structure of the agent-cli commands are as follows:</p>
<pre class="highlight plaintext"><code>c:agent-cli [options] &lt;action&gt; [arguments]
</code></pre>

<h6 id="options">Options</h6>

<ul>
<li>  Options are prefixed with <code class="prettyprint">-</code> or <code class="prettyprint">--</code> to separate them from arguments. </li>
<li>  Each command or action defines the options it uses. </li>
<li>  <strong>NOTE:</strong> the options are consistent in naming convention and usage across the commands.</li>
</ul>

<h6 id="common-options">Common Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>none</td>
<td>&ndash;help</td>
<td>none</td>
<td>print help about the command</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>-v</td>
<td>none</td>
</tr>
<tr>
<td>-q</td>
<td>&ndash;quiet</td>
<td>none</td>
<td>print essential output</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>filename</td>
<td>fully qualified path of the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>-h</td>
<td>&ndash;home</td>
<td>path</td>
<td>fully qualified path of the agent&rsquo;s working directory</td>
</tr>
<tr>
<td>-F</td>
<td>&ndash;force</td>
<td>none</td>
<td>directive to override safety logic</td>
</tr>
</tbody></table>

<h6 id="arguments">Arguments</h6>

<ul>
<li>  The agent-cli interprets the first argument (non-option) as the action command. </li>
<li>  All subsequent arguments are command specific. </li>
</ul>

<p>The commands are grouped into a sub group.
The following Commands groups are;</p>

<ul>
<li><strong>Informational Commands</strong></li>
<li><strong>Lifecycle Commands</strong></li>
<li><strong>Diagnostic Commands</strong></li>
<li><strong>Usage Commands</strong></li>
<li><strong>Configuration Commands</strong></li>
<li><strong>Update Commands</strong></li>
</ul>

<h5 id="informational-commands">Informational Commands</h5>

<h6 id="help">help</h6>

<p>The command line provides built in helper functions.</p>

<h6 id="navigation-help">Navigation Help</h6>

<p>For a descriptive list of the commands </p>
<pre class="highlight plaintext"><code>c:agent-cli --help
</code></pre>

<h6 id="version">version</h6>

<p>Displays the version information of the agent-cli.</p>
<pre class="highlight plaintext"><code>c: agent-cli -V
c: agent-cli --version 
</code></pre>

<p><strong>NOTE:</strong> The output is a simple version identifier following the semantic versioning rules of major, minor, and build.</p>
<pre class="highlight plaintext"><code>Major.minor.build (e.g. 1.0.51)
</code></pre>

<h6 id="info">info</h6>

<p>Used to display information of the Agent-CLI.</p>

<ul>
<li>Displays the agent-cli splash screen</li>
<li>Displays the version of the agent-cli</li>
<li>Displays the working directory of the agent</li>
</ul>
<pre class="highlight plaintext"><code>c:agent-cli info
</code></pre>

<h6 id="lifecycle-commands">Lifecycle Commands</h6>

<p>Lifecycle commands allow an administrator to change and check the run state of an agent.</p>

<h6 id="start">start</h6>

<p>Used to attempt to start an agent.</p>

<ul>
<li>Allows the selection of which agent configuration file to use</li>
<li>Allows the selection of the agent working directory</li>
<li>Allows the selection of the agent pidFile to use</li>
<li>Allows the setting of the level of detail to output</li>
</ul>
<pre class="highlight plaintext"><code>c: agent-cli start [options] 
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>filename</td>
<td>fully qualified filename of the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;home</td>
<td>directory path</td>
<td>fully qualified path of the agent&rsquo;s working directory</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;pidFile</td>
<td>filename</td>
<td>fully qualified filename of the agent&rsquo;s pidFileagent-cli</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>provides more detailed information output</td>
</tr>
<tr>
<td>-q</td>
<td>&ndash;quiet</td>
<td>none</td>
<td>provides only essential information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli start -h
c:agent-cli start —-help
c:agent-cli start -f c:\BodhiAgent\agent1.js
c:agent-cli start —-config c:\BodhiAgent\agent1.js
c:agent-cli start —-home c:\
c:agent-cli start —-pidFile c:\BodhiAgent\agent.pid
c:agent-cli start -v
c:agent-cli start —verbose
c:agent-cli start -q
c:agent-cli start —-quiet
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Error: connect EADDRNOTAVAIL</td>
<td>the connection url  in the configuration file is bad</td>
</tr>
<tr>
<td>error: unknown option &lsquo;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="status">status</h6>

<p>Used to retrieve the status of a running agent.</p>

<ul>
<li>Allows the selection of the agent configuration file to use</li>
<li>Allows the setting of the level of detail to output</li>
</ul>
<pre class="highlight plaintext"><code>c: agent-cli status [options] 
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>filename</td>
<td>fully qualified filename of the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli status —h
c:agent-cli status —-help
c:agent-cli status -f c:\BodhiAgent\agent1.js
c:agent-cli status —-config c:\BodhiAgent\agent1.js
c:agent-cli status -v
c:agent-cli status —verbose
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent available</td>
<td>agent is running and available</td>
</tr>
<tr>
<td>agent unavailable</td>
<td>agent has stopped</td>
</tr>
<tr>
<td>agent unable to start using fully qualified configuration path</td>
<td>No configuration file at fully qualified configuration path</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="stop">stop</h6>

<p>Used to gracefully stop or shutdown an agent.</p>

<ul>
<li>Allows the selection of the agent configuration file to use</li>
<li>Allows the setting of the level of detail to output</li>
</ul>
<pre class="highlight plaintext"><code>c:agent-cli stop [options] 
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>filename</td>
<td>fully qualified filename of the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli stop —h
c:agent-cli stop —-help
c:agent-cli stop -f c:\BodhiAgent\agent1.js
c:agent-cli start —-config c:\BodhiAgent\agent1.js
c:agent-cli start -v
c:agent-cli start —verbose
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent stopping now &hellip;</td>
<td>agent is shutting down gracefully updated</td>
</tr>
<tr>
<td>agent is unavailable</td>
<td>agent is stopped</td>
</tr>
<tr>
<td>agent unable to start using fully qualified configuration path</td>
<td>No configuration file at fully qualified configuration path</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="set-name">set-name</h6>

<p>Used to configure the name of an agent.</p>

<ul>
<li>Allows the setting of the name of the agent</li>
<li>Allows the selection of the agent configuration file to use</li>
<li>Allows the setting of the level of detail to output</li>
</ul>
<pre class="highlight plaintext"><code>c:agent-cli set-name [options] &lt;name&gt;
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>filename</td>
<td>fully qualified filename of the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli set-name —h
c:agent-cli set-name —-help
c:agent-cli set-name Fred
c:agent-cli set-name -f c:\BodhiAgent\agent1.js Teddy
c:agent-cli set-name —config c:\BodhiAgent\agent1.js Herb
c:agent-cli set-name -v Fred
c:agent-cli set-name --verbose Fred
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent updated</td>
<td>the configuration file has be successfully updated</td>
</tr>
<tr>
<td>No agent available at <location></td>
<td>there is no agent configuration file at the specific location</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="set-connection">set-connection</h6>

<p>Used to configure a connection to an agent.</p>

<ul>
<li>Allows the setting of the http url for the connection</li>
<li>Allows the selection of the agent configuration file to use</li>
<li>Allows the setting of the timeout value</li>
<li>Allows the setting of the proxy http url</li>
<li>Allows the setting of the level of detail to output</li>
</ul>
<pre class="highlight plaintext"><code>c: agent-cli set-connection [options] connection]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>filename</td>
<td>fully qualified filename of the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;timeout</td>
<td>value</td>
<td>specifies the connections timeout value</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;proxy</td>
<td>proxy</td>
<td>specifies the http proxy url</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli set-connection —h
c:agent-cli set-connection —-help
c:agent-cli set-connection https://api.bodhi.space
c:agent-cli set-connection -f c:\BodhiAgent\agent1.js
c:agent-cli set-connection —-config c:\BodhiAgent\agent1.js
c:agent-cli set-connection --timeout 20000
c:agent-cli set-connection —-proxy http://proxy.redbookcloud.com
c:agent-cli set-connection -v https://api.redbookcloud.com
c:agent-cli set-connection --verbose https://api.redbookcloud.com
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent updated</td>
<td>the agent configuration file has be successfully updated</td>
</tr>
<tr>
<td>No agent available at <location></td>
<td>there is no agent configuration file at the specific location</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="set-logger">set-logger</h6>

<p>Used to configure the logging of an agent.</p>

<ul>
<li>  Allows the setting of the log file location </li>
<li>  Allows the selection of the agent configuration file to use</li>
<li>  Allows the setting of the level of logging information</li>
<li>  Allows the setting of the level of detail to output</li>
</ul>
<pre class="highlight plaintext"><code>c: set-logger [options
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>filename</td>
<td>fully qualified path of the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;file</td>
<td>filename</td>
<td>fully qualified filename of the the log file location</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;level</td>
<td>level</td>
<td>specifies the log level (error, warn, info, verbose, debug)</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli set-logger —h
c:agent-cli set-logger —-help
c:agent-cli set-logger Fred
c:agent-cli set-logger -f c:\BohiAgent\agent1.js
c:agent-cli set-logger —-file c:\BodhiAgent\test.log
c:agent-cli set-logger -f c:\BohiAgent\agent1.js
c:agent-cli set-logger --level error
c:agent-cli set-logger —-level warn
c:agent-cli set-logger —-level info
c:agent-cli set-logger —-level verbose
c:agent-cli set-logger —-level debug
c:agent-cli set-logger -v
c:agent-cli set-logger —-verbose
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent updated</td>
<td>the agent configuration file has be successfully updated</td>
</tr>
<tr>
<td>No agent available at <location></td>
<td>there is no agent configuration file at the specific location</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="set-management">set-management</h6>

<p>Used to configure the management endpoint for an agent.</p>

<ul>
<li>  Allows the setting of the log file location </li>
<li>  Allows the selection of the agent configuration file to use</li>
<li>  Allows the setting of the http port</li>
<li>  Allows the setting of the http address to listen on</li>
<li>  Allows the setting of the level of detail to output</li>
</ul>
<pre class="highlight plaintext"><code>c: set-management [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>filename</td>
<td>fully qualified path of the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;port</td>
<td>port address</td>
<td>specifies the management http port address</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;connection</td>
<td>url:port</td>
<td>specifies the mnagement url and port address</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli set-management https://api.bodhi.space
c:agent-cli set-management —h
c:agent-cli set-management —-help
c:agent-cli set-management -f c:\BodhiAgent\agent1.js
c:agent-cli set-management —-config c:\BodhiAgent\agent1.js
c:agent-cli set-management —-port 4444
c:agent-cli set-management —-connection https://api.bodhi.space:4444
c:agent-cli set-management -v https://api.bodhi.space
c:agent-cli set-management -- verbose https://api.bodhi.space
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent updated</td>
<td>the agent configuration file has be successfully updated</td>
</tr>
<tr>
<td>No agent available at <location></td>
<td>there is no agent configuration file at the specific location</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h5 id="diagnostic-commands">Diagnostic Commands</h5>

<p>Diagnostic commands are used by an administrator to troubleshoot an agent that is having trouble entering a running state or to test environmental specific details uniformly across platforms.</p>

<h6 id="check-core">check-core</h6>

<p>Used to retrieve information of the agent-core that is being used</p>

<ul>
<li>Displays the version of the current agent.</li>
<li>Displays the working directory of the current agent.</li>
</ul>
<pre class="highlight plaintext"><code>c:agent-cli check-core [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli check-core
c:agent-cli check-core —h
c:agent-cli check-core —-help
</code></pre>

<h6 id="check-config">check-config</h6>

<p>Used to check for configuration problems in the agent. </p>

<ul>
<li>The agent will load and process all configuration files, </li>
<li>Displays agent apps that are installed</li>
<li>Will not cause agent to enter into a ready state. </li>
<li><strong>NOTE:</strong> This command is safe to run even if there is a agent currently running.</li>
</ul>
<pre class="highlight plaintext"><code>c:agent-cli check-config [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>full filename</td>
<td>specifies the agent&rsquo;s configuration file to use</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;home</td>
<td>directory path</td>
<td>fully qualified path of the agent&rsquo;s working directory</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
<tr>
<td>-q</td>
<td>&ndash;quiet</td>
<td>none</td>
<td>prints only essential information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli check-config
c:agent-cli check-config —h
c:agent-cli check-config —-help
c:agent-cli check-config -f c:BodhiAgent\agent1.js
c:agent-cli check-config —-config c:\BodhiAgent\agent1.js
c:agent-cli check-config —-home c:\BodhiAgent
c:agent-cli check-config -v
c:agent-cli check-config —-verbose
c:agent-cli check-config -q
c:agent-cli check-config —-quiet
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="check-connection">check-connection</h6>

<p>Used to check for connection issues with an agent.</p>
<pre class="highlight plaintext"><code>c:agent-cli check-connection [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli check-config
c:agent-cli check-config —h
c:agent-cli check-config —-help
</code></pre>

<p>The provided URL will go through the following checks:</p>

<ol>
<li>Check the URL format</li>
<li>Check the DNS resolution from the agent&rsquo;s host</li>
<li>Check the TCP port is reachable by opening up a connection on host:port</li>
<li>Issue a HTTP GET against the ping endpoint of the system</li>
</ol>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="check-route">check-route</h6>

<p>Used to check for network problems (firewalls &amp; proxy rules) from the perspective of the agent runtime. </p>
<pre class="highlight plaintext"><code>c:agent-cli check-route &lt;scheme://host:port/path&gt;
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli check-route http://localhost:4444/#/dashboard
c:agent-cli check-route —h
c:agent-cli check-route —-help
c:agent-cli check-route -v http://localhost:4444/#/dashboard
c:agent-cli check-route —-verbose http://localhost:4444/#/dashboard
</code></pre>

<p>The provided URL will go through the following checks:</p>

<ol>
<li>Check the URL format</li>
<li>Check the DNS resolution of host/IP</li>
<li>Check that the TCP port reachable by opening up a connection on host:port</li>
<li>If scheme is http of https then issue a HTTP GET against the specified URL</li>
</ol>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Got <a href="scheme://host:port/path">scheme://host:port/path</a></td>
<td>resolved the provided <a href="scheme://host:port/path">scheme://host:port/path</a></td>
</tr>
<tr>
<td>null unresolved</td>
<td>problem with the <a href="host:port/path">host:port/path</a></td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h5 id="usage-commands">Usage Commands</h5>

<h6 id="console">console</h6>

<p>Used to start the web console in the default browser that is set for the system. </p>
<pre class="highlight plaintext"><code>c:agent-cli console
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli console
c:agent-cli console -h
c:agent-cli console --help
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h5 id="configuration-commands">Configuration Commands</h5>

<h6 id="reset">reset</h6>

<p>Used to reset an agent&rsquo;s state by deleting the .agent file from the specified working directory.</p>
<pre class="highlight plaintext"><code>c:agent-cli reset [options]
</code></pre>

<p><strong>NOTE:</strong> Using this command will delete the .agent file which contains the agent&rsquo;s identity</p>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;home</td>
<td>directory</td>
<td>fully qualified path of the agent&rsquo;s working directory</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;force</td>
<td>none</td>
<td>forces the agent to reset regardless of start</td>
</tr>
<tr>
<td>-H</td>
<td>&ndash;HARD</td>
<td>none</td>
<td>forces the reset the name and namespace of an agent</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli reset
c:agent-cli reset -h
c:agent-cli reset --help
c:agent-cli reset --home c:\BodhiAgent
c:agent-cli reset -F
c:agent-cli reset -force
c:agent-cli reset -H
c:agent-cli reset -hard
c:agent-cli reset -v
c:agent-cli reset --verbose
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Agent reset</td>
<td>.agent file as been deleted</td>
</tr>
<tr>
<td>No agent available at working directory</td>
<td>agent.js file missing from the working directory</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="revoke">revoke</h6>

<p>Used to revoke an agent&rsquo;s access token.</p>

<ul>
<li><strong>NOTE:</strong> This command will leave all other agent data intact.</li>
</ul>
<pre class="highlight plaintext"><code>c:agent-cli revoke [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;home</td>
<td>directory</td>
<td>fully qualified path of the agent&rsquo;s working directory</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli revoke
c:agent-cli revoke -h
c:agent-cli revoke --help
c:agent-cli revoke --home c:\BodhiAgent
c:agent-cli revoke -v
c:agent-cli revoke --verbose
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization revoke</td>
<td>the Authorization token as been removed</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="unassign">unassign</h6>

<p>Used to remove the agent&rsquo;s association to a namespace.</p>
<pre class="highlight plaintext"><code>c:agent-cli unassign [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>none</td>
<td>&ndash;home</td>
<td>directory</td>
<td>fully qualified path of the agent&rsquo;s working directory</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli unassign
c:agent-cli unassign -h
c:agent-cli unassign --help
c:agent-cli unassign --home c:\BodhiAgent
c:agent-cli unassign -v
c:agent-cli unassign --verbose
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>No agent available at working directory</td>
<td>agent.js file missing from the working directory</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="init">init</h6>

<p>Used to initialize or create the agent&rsquo;s configuration file.</p>
<pre class="highlight plaintext"><code>c:agent-cli init [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>directory</td>
<td>fully qualified filename of the agent&rsquo;s configuration file</td>
</tr>
<tr>
<td>-F</td>
<td>&ndash;force</td>
<td>none</td>
<td>forces the creation of the agent.js</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli init
c:agent-cli init -h
c:agent-cli init --help
c:agent-cli init --config c:\BodhiAgent\agent.js
c:agent-cli init -f
c:agent-cli init --force
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Agent created</td>
<td>An agent configuration file as being created in the working directory</td>
</tr>
<tr>
<td>Agent already exist Use -F or &ndash;force to recreate</td>
<td>Configuration file already exists</td>
</tr>
<tr>
<td>serror: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="install-app">install-app</h6>

<p>Used to install an application into the agent.</p>
<pre class="highlight plaintext"><code>c:agent-cli install-app [options] &lt;app&gt;
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>directory</td>
<td>fully qualified filename of the agent&rsquo;s configuration file</td>
</tr>
<tr>
<td>-F</td>
<td>&ndash;force</td>
<td>none</td>
<td>forces the creation of the agent.js</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli install-app agent-app-weather
c:agent-cli install-app -h
c:agent-cli install-app --help
c:agent-cli install-app --f c:\BodhiAgent\agent.js
c:agent-cli install-app --config c:\BodhiAgent\agent.js
c:agent-cli install-app -v agent-app-weather
c:agent-cli install-app --verbose agent-app-weather
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Unable to locate the application [application]</td>
<td>Name is not found or is incorrect</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="install-ext">install-ext</h6>

<p>Used to install an extension into the agent.</p>
<pre class="highlight plaintext"><code>c:agent-cli install-ext [options] &lt;app&gt;
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-f</td>
<td>&ndash;config</td>
<td>directory</td>
<td>fully qualified filename of the agent&rsquo;s configuration file</td>
</tr>
<tr>
<td>-F</td>
<td>&ndash;force</td>
<td>none</td>
<td>forces the creation of the agent.js</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli install-ext agent-ext-csv-to-json
c:agent-cli install-ext -h
c:agent-cli install-ext --help
c:agent-cli install-ext --f c:\BodhiAgent\agent.js
c:agent-cli install-ext --config c:\BodhiAgent\agent.js
c:agent-cli install-ext -v agent-ext-csv-to-json
c:agent-cli install-ext --verbose agent-ext-csv-to-json
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Unable to locate the extension [extension]</td>
<td>Name is not found or is incorrect</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h5 id="update-commands">Update Commands</h5>

<h6 id="update-core">update-core</h6>

<p>Used to update to the latest version of the agent.</p>
<pre class="highlight plaintext"><code>c:agent-cli update-core [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli update-core
c:agent-cli update-core -h
c:agent-cli update-core --help
c:agent-cli update-core -v
c:agent-cli update-core --verbose
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent-core@x.x.x node_modules\agent-core</td>
<td>version number and location of the console module</td>
</tr>
<tr>
<td>agent-core updated</td>
<td>Agent core was successfully updated</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

<h6 id="update-console">update-console</h6>

<p>Used to update to the latest version of the web console.</p>
<pre class="highlight plaintext"><code>c:agent-cli update-console [options]
</code></pre>

<h6 id="options">Options</h6>

<table><thead>
<tr>
<th>short</th>
<th>long</th>
<th>arg</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>-h</td>
<td>&ndash;help</td>
<td>none</td>
<td>prints a descriptive list of the commands</td>
</tr>
<tr>
<td>-v</td>
<td>&ndash;verbose</td>
<td>none</td>
<td>prints more detailed information output</td>
</tr>
</tbody></table>
<pre class="highlight plaintext"><code>c:agent-cli update-console
c:agent-cli update-console -h
c:agent-cli update-console --help
c:agent-cli update-console -v
c:agent-cli update-console --verbose
</code></pre>

<h6 id="return-response">Return Response</h6>

<table><thead>
<tr>
<th>Response</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agent-console@x.x.x node_modules\agent-console</td>
<td>version number and location of the console module</td>
</tr>
<tr>
<td>agent-console updated</td>
<td>Agent console was successfully updated</td>
</tr>
<tr>
<td>error: unknown option &#39;option&rsquo;</td>
<td>Bad option</td>
</tr>
</tbody></table>

          <h2 id="installation">Installation</h2>

<p>This library lives in artifactory now and will become public soon</p>
<pre class="highlight plaintext"><code>npm install bodhi-rest-superagent
</code></pre>

<h2 id="basic-api">Basic API</h2>

<p>var api      = require(&lsquo;bodhi-rest-superagent&rsquo;)
var Client   = api.Client;
var Basic    = api.BasicCredential;
var Bearer   = api.BearerToken;
var agent    = api.createAgentClient(&#39;token&rsquo;, &#39;my-ns&rsquo;);
var user     = api.createUserClient(&#39;username&rsquo;, &#39;password&rsquo;, &#39;my-ns&rsquo;);</p>
<pre class="highlight plaintext"><code>var api      = require('bodhi-rest-superagent')
var Client   = api.Client;
var Basic    = api.BasicCredential;
var Bearer   = api.BearerToken;
var agent    = api.createAgentClient('token', 'my-ns');
var user     = api.createUserClient('username', 'password', 'my-ns');
</code></pre>

<h3 id="simple-setup">Simple Setup</h3>

<p>Let the package do the standard setup and supply the credentials plus the namespace</p>

<p>var agent    = api.createAgentClient(&#39;token&rsquo;, &#39;my-ns&rsquo;);
var user     = api.createUserClient(&#39;username&rsquo;, &#39;password&rsquo;, &#39;my-ns&rsquo;);</p>
<pre class="highlight plaintext"><code>var agent    = api.createAgentClient('token', 'my-ns');
var user     = api.createUserClient('username', 'password', 'my-ns');
</code></pre>

<h3 id="custom-setup">Custom Setup</h3>

<p>Take control of the entire setup process.</p>

<p>var Client   = api.Client;
var Basic    = api.BasicCredential;</p>

<p>var client = new Client({
    uri          : &#39;https://local:1337&rsquo;
    namespace    : &ldquo;miles&rdquo;,
    credentials  : new Basic(&#39;me&rsquo;, &#39;secret&rsquo;)
});</p>
<pre class="highlight plaintext"><code>var Client   = api.Client;
var Basic    = api.BasicCredential;

var client = new Client({
    uri          : 'https://local:1337'
    namespace    : "miles",
    credentials  : new Basic('me', 'secret')
});
</code></pre>

<h3 id="resource-identifiers">Resource Identifiers</h3>

<p>The api is tolerant of both absolute and relative URLs. </p>

<h4 id="relative-uris">Relative URIs</h4>

<p>A relative URIs can be specified as a string or an array of path elements. Relative URIs are relative to the namespace.</p>

<p>client.<a href="'relative/url',%20function(err,%20data,%20ctx){}"><http-operation></a>
client.<a href="['resources',%20'Store',%20id],%20function(err,%20data,%20ctx"><http-operation></a>{})</p>
<pre class="highlight plaintext"><code>client.[&lt;http-operation&gt;]('relative/url', function(err, data, ctx){})
client.[&lt;http-operation&gt;](['resources', 'Store', id], function(err, data, ctx){})
</code></pre>

<h4 id="absolute-uris">Absolute URIs</h4>

<p>Absolute URIs start with a &rsquo;/&rsquo; character. They ignore the established namespace but honor the authority. It can be used for public API calls , /me, anything that wants to bypass the namespace. When using arrays the first element MUST include the &rsquo;/&rsquo; character as the first character.</p>

<p>client.<a href="'/absolute/url',%20function(err,%20data,%20ctx){}"><http-operation></a>
client.<a href="['/me'],%20function(err,%20data,%20ctx){}"><http-operation></a></p>
<pre class="highlight plaintext"><code>client.[&lt;http-operation&gt;]('/absolute/url', function(err, data, ctx){})
client.[&lt;http-operation&gt;](['/me'], function(err, data, ctx){})
</code></pre>

<h3 id="reading-data">Reading Data</h3>

<p>fetch: Get a single document</p>

<p>client.fetch(uri, function(err, jsonObject, res))</p>
<pre class="highlight plaintext"><code>client.fetch(uri, function(err, jsonObject, res))
</code></pre>

<p>get: get a set of documents</p>

<p>client.get(uri, function(err, jsonArray, res))</p>
<pre class="highlight plaintext"><code>client.get(uri, function(err, jsonArray, res))
</code></pre>

<p>getPages: get a few pages of documents</p>

<p>client.getPages(uri, function(err, jsonArray, res))</p>
<pre class="highlight plaintext"><code>client.getPages(uri, function(err, jsonArray, res))
</code></pre>

<p>getAll: get all pages of documents</p>

<p>client.getAll(resources/:type?where={/<em>scope</em>/}, function(err, jsonArray, res))</p>
<pre class="highlight plaintext"><code>client.getAll(resources/:type?where={/*scope*/}, function(err, jsonArray, res))
</code></pre>

<p>gather: get several objects concurrently</p>

<p>var resources = {
  a: &ldquo;resource/:type?where={/<em>scope</em>/},
  b: &quot;resource/:type?where={/<em>scope</em>/},
  c: &quot;resource/:type?where={/<em>scope</em>/},
}</p>

<p>client.gather(resources, function(err, json, res){
    console.log(json.a)  //= [/* results of a <em>/]
    console.log(json.b)  //= [/</em> results of b <em>/]
    console.log(json.c)  //= [/</em> results of c */]
})</p>
<pre class="highlight plaintext"><code>var resources = {
  a: "resource/:type?where={/*scope*/},
  b: "resource/:type?where={/*scope*/},
  c: "resource/:type?where={/*scope*/},
}

client.gather(resources, function(err, json, res){
    console.log(json.a)  //= [/* results of a */]
    console.log(json.b)  //= [/* results of b */]
    console.log(json.c)  //= [/* results of c */]
})
</code></pre>

<p>gatherAll: get all pages of all object concurrently</p>

<p>client.getAll(resources, function(err, json, res){
    console.log(json.a)  //= [/* results of a <em>/]
    console.log(json.b)  //= [/</em> results of b <em>/]
    console.log(json.c)  //= [/</em> results of c */]
})</p>
<pre class="highlight plaintext"><code>client.getAll(resources, function(err, json, res){
    console.log(json.a)  //= [/* results of a */]
    console.log(json.b)  //= [/* results of b */]
    console.log(json.c)  //= [/* results of c */]
})
</code></pre>

<h3 id="sending-data">Sending Data</h3>

<p>post: Create a new instance of the document</p>

<p>client.post(&#39;resources/:type&rsquo; , {/* your data here */}, function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>client.post('resources/:type' , {/* your data here */}, function(err, data, ctx){})
</code></pre>

<p>postAll: Create new instances of new types on the system</p>

<p>var bag = {
    &#39;resources/MyType&rsquo;: {name: &quot;name&rdquo;, uri: &ldquo;http://localhost/a/b&rdquo;, system_v: true }
    &#39;resources/AType&rsquo; : [{a: &#39;A&rsquo;}, {a: &#39;B&rsquo;}, {a: &#39;C&rsquo;}]
    &#39;resources/DType&rsquo; : [{d: &rsquo;D&rsquo;}, {d: &#39;E&rsquo;}, {d: &#39;F&rsquo;}]
}</p>

<p>client.postAll(bag, function(err, data, ctx){
        data[&#39;resources/MyType&rsquo;] //= header
        data[&#39;resources/AType&rsquo;] //= [location, location, location]
        data[&#39;resources/DType&rsquo;] //= [location, location, location]
})</p>
<pre class="highlight plaintext"><code>var bag = {
    'resources/MyType': {name: "name", uri: "http://localhost/a/b", system_v: true }
    'resources/AType' : [{a: 'A'}, {a: 'B'}, {a: 'C'}]
    'resources/DType' : [{d: 'D'}, {d: 'E'}, {d: 'F'}]
}

client.postAll(bag, function(err, data, ctx){
        data['resources/MyType'] //= header
        data['resources/AType'] //= [location, location, location]
        data['resources/DType'] //= [location, location, location]
})
</code></pre>

<p>put: Replace an existing document by id</p>

<p>client.put(&#39;resources/:type/:id&rsquo;, {/* your updated resource here */}, function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>client.put('resources/:type/:id', {/* your updated resource here */}, function(err, data, ctx){})
</code></pre>

<p>patch: Patch an exising document by id</p>

<p>client.patch(&#39;resources/:type/:id&rsquo;, {/* your patch document here */}, function(err, response, ctx){})</p>
<pre class="highlight plaintext"><code>client.patch('resources/:type/:id', {/* your patch document here */}, function(err, response, ctx){})
</code></pre>

<p>upsert: Create new or update existing document. Will produce an error if the system encounters more than one matchin document.</p>

<p>client.upsert(&rsquo;/absolute/url?where={/<em>scope</em>/}&rsquo;, {/* your updated resource here */}, function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>client.upsert('/absolute/url?where={/*scope*/}', {/* your updated resource here */}, function(err, data, ctx){})
</code></pre>

<h4 id="composite-operations">Composite Operations</h4>

<p>Update one or multiple documents. </p>

<p>client.fetchAndUpdate(&rsquo;/absolute/url?where={/<em>scope</em>/}&rsquo;, updateFunction, function(err, data, ctx){})</p>

<p>client.findAndUpdate(&rsquo;/absolute/url?where={/<em>scopt\e</em>/}&rsquo;, updateFunction, function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>client.fetchAndUpdate('/absolute/url?where={/*scope*/}', updateFunction, function(err, data, ctx){})
client.findAndUpdate('/absolute/url?where={/*scopt\e*/}', updateFunction, function(err, data, ctx){})
</code></pre>

<p>Patch a document by query. Will produce an error if the system encounters more than one matchin document.</p>

<p>client.fetchAndPatch(&rsquo;/absolute/url?where={/<em>scope</em>/}&rsquo;, updateFunction, function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>client.fetchAndPatch('/absolute/url?where={/*scope*/}', updateFunction, function(err, data, ctx){})
</code></pre>

<p>fetchAndExtend: grab a document and change the properties in the mergeObject then update it. Will produce an error if the system encounters more than one matchin document.</p>

<p>var mergeObject = {
    a: &#39;A&rsquo;,
    flag: true
    my_date: new Date().now()
}</p>

<p>client.fethcAndExtend(&rsquo;/absolute/url?where={/<em>scopt\e</em>/}&rsquo;, mergeObject, function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>var mergeObject = {
    a: 'A',
    flag: true
    my_date: new Date().now()
}

client.fethcAndExtend('/absolute/url?where={/*scopt\e*/}', mergeObject, function(err, data, ctx){})
</code></pre>

<h3 id="removing-data">Removing Data</h3>

<p>Remove a document by sys_id</p>

<p>client.remove(&rsquo;/absolute/url/id&rsquo; , {/* your data here */}, function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>client.remove('/absolute/url/id' , {/* your data here */}, function(err, data, ctx){})
</code></pre>

<p>Remove document(s) that match a specific URL with scope</p>

<p>client.fetchAndRemove(&rsquo;/absolute/url?where={/<em>scope</em>/}&rsquo; , function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>client.fetchAndRemove('/absolute/url?where={/*scope*/}' , function(err, data, ctx){})
</code></pre>

<p>Remove a set of documents that mactch a specific URL with scope</p>

<p>client.findAndRemove(&rsquo;/absolute/url?where={/<em>scope</em>/}&rsquo; , function(err, data, ctx){})</p>
<pre class="highlight plaintext"><code>client.findAndRemove('/absolute/url?where={/*scope*/}' , function(err, data, ctx){})
</code></pre>

<h2 id="responses">Responses</h2>

<p>The service response is available via a callback of the form:</p>

<p>function(err, data, ctx)</p>
<pre class="highlight plaintext"><code>function(err, data, ctx)
</code></pre>

<h3 id="error-object">Error Object</h3>

<h4 id="system-errors">System Errors</h4>

<p>Same as before &hellip; bad things happen at the infrastructure/runtime layer. The error will have a few elements added to it.</p>

<h4 id="protocol-errors">Protocol Errors</h4>

<p>Anything with a 4XX or 5XX error code</p>

<ul>
<li>err.api     true</li>
<li>err.status  http status code (deprecated)</li>
<li>err.statusCode  to be consistent with the other </li>
<li>err.source  method, resource, and representation of the request</li>
<li>err.message the message from the API server error</li>
<li>err.code    code from the api server</li>
<li>err.context parameters returned by the api server</li>
</ul>

<h3 id="data-element">Data Element</h3>

<ul>
<li>for a 200 data        = the returned JSON</li>
<li>for a 201 or 202 data = content of the location header</li>
<li>for a 204 data        = null</li>
</ul>

<h3 id="context-element">Context Element</h3>

<ol>
<li>ctx.statusCode,</li>
<li>ctx.headers,</li>
<li>ctx.request = the method, resource, and representation of the original request</li>
</ol>

          <h1 id="publishing-applications">Publishing Applications</h1>

<h2 id="overview">Overview</h2>

<p>To publish application for the IoT Platform, you need to follow a few simple steps to describe your application.  </p>

<h2 id="publishing-your-application">Publishing Your Application</h2>

<p>To publish your application you add the following directory structure for your application:</p>
<pre class="highlight plaintext"><code>    /&lt;app-name&gt;/
            /public/
</code></pre>

<ul>
<li>Folder (npm app-name)

<ul>
<li>index.html (could be empty)</li>
<li>LICENSE (standard apache license file)</li>
<li>package.json (example provided below) </li>
<li>public (folder) 

<ul>
<li>app icon.png</li>
<li>NewType1.json file (optional)</li>
<li>NewType2.json file (optional)</li>
<li>NewType3.json file (optional)</li>
</ul></li>
</ul></li>
</ul>

<p>To publish an app into the IoT Platform you have to zip up the following:
{code}
        index.html (could be empty)
        LICENSE
        package.json</p>

<p>folder=<public>
            app_icon.png
            NewType1.json file (optional)
            NewType2.json file (optional)
            NewType3.josn file (optional)
            &hellip;</p>

<h3 id="example-package.json-for-mobile-applications">Example package.json for Mobile Applications</h3>

<p>By Clicking on HS Template you get a package.zip file that is downloaded to your desktop that contains the following:</p>

<ul>
<li><p><strong>index.html</strong></p>

<p>If you open this file it say Click Me and a Welcome will appear above Click Me</p></li>
<li><p><strong>LICENSE</strong>
This is the apache2 license file that needs to be with all applications you plan to build</p></li>
<li><p><strong>README.md</strong></p>

<p>README.md are directions to get started developing your mobile application</p></li>
<li><p><strong>image_home.png</strong>
Image_home.png is the background image for index.html</p></li>
<li><p><strong>package.json</strong>:</p>

<p>This is the example package.json that you will cutomize based on your application needs.  To the right is a formatted version of the sample package.json that is included in HS Template&rsquo;s zip file.</p></li>
</ul>
<pre class="highlight plaintext"><code>package.json that gets includes with HS Template's zip file:

{
    "name": "HSappTemplate",
    "version": "0.0.0",
    "title": "HSappTemplate",
    "description": "New application Hello, World!",
    "profile": {
        "name": "HSappTemplate",
        "dml": {
            "BodhiApplication": {
                "select": {}
            }
        }
    },
    "settings": {
        "publisher": "",
        "categories": [""],
        "offline": false,
        "navigationBar": "auto",
        "location": "S3",
        "storage": "s3",
        "type":"mobile"
    },
    "dependencies": {
        "bodhi-mobile":"*" 
        },
    "autoUpdateVersion": true
}

</code></pre>

<p>See Descriptions of package.json contents below to see what each packge.json entry is for:</p>

<p>{</p>

<p>&ldquo;name&rdquo;: &ldquo;HSappTemplate&rdquo;,</p>

<p>&ldquo;version&rdquo;: &ldquo;0.0.0&rdquo;,</p>

<p>&ldquo;title&rdquo;: &ldquo;HSappTemplate&rdquo;,</p>

<p>&ldquo;description&rdquo;: &ldquo;New application Hello, World!&rdquo;,</p>

<p>&ldquo;profile&rdquo;: {</p>

<p>&ldquo;name&rdquo;: &ldquo;HSappTemplate&rdquo;,</p>

<p>&ldquo;dml&rdquo;: {</p>

<p>&ldquo;BodhiApplication&rdquo;: {</p>

<p>&ldquo;select&rdquo;: {}</p>

<p>}</p>

<p>}</p>

<p>},</p>

<p>&ldquo;settings&rdquo;: {</p>

<p>&ldquo;publisher&rdquo;: &ldquo;&rdquo;,</p>

<p>&ldquo;categories&rdquo;: [&ldquo;&rdquo;],</p>

<p>&ldquo;offline&rdquo;: false,</p>

<p>&ldquo;navigationBar&rdquo;: &ldquo;auto&rdquo;,</p>

<p>&ldquo;location&rdquo;: &ldquo;S3&rdquo;,</p>

<p>&ldquo;storage&rdquo;: &ldquo;s3&rdquo;,</p>

<p>&ldquo;type&rdquo;:&ldquo;mobile&rdquo;</p>

<p>},</p>

<p>&ldquo;dependencies&rdquo;: {</p>

<p>&ldquo;bodhi-mobile&rdquo;:&ldquo;*&rdquo; </p>

<p>},</p>

<p>&ldquo;autoUpdateVersion&rdquo;: true</p>

<p>}</p>

<h3 id="example-of-package.json-for-agent-or-job-applications">Example of Package.json for agent or job Applications</h3>
<pre class="highlight plaintext"><code>Example of package.json for agent or job applications:
#!javascript

{
  "name": "app-package-name",
  "version": "0.0.1",
  "title": "Application Title",
  "description": "Short Application Description.",
  "profile": {
    "name": "app-package-name",
    "dml": {
      “BodhiApplication": {
       "select": {},
       "update":{},
       "delete":{},
       "insert":{}
      },
      "NewType1": {
        "select": {}
      },
      "NewType2": {
        "select": {}
      }
    }
  },
  "settings": {
    "categories": [
      "Aloha",
      "POS"
    ],
    "publisher": "your company",
    "npm_package_name": "app-package-name",


if you have any related apps you want to install together::
"related-apps": [
      "bodhi.aloha-app-transactions",
      "bodhi.aloha-app-store"
    ],
    "public_path": "public",
    "global_store_icon": "public/icon.png",
   "location": "S3",
   "storage": "s3",
   "type": "agent",    
(type can be “job”, “agent”, “mobile”, “web” )   
 "new_type_required": true,
  "install": {
"new": {
"model": [
{
"type": "enumeration",
"name": "TypeName",
"object": "Enumerations/TypeName.json"
},
{
"type": "embedded_type",
"name": "InventoryPurchaseOrder",
"object": "Types/InventoryPurchaseOrder.json"
},
{ "type": "custom_type",
"name": "TypeName2",
"object": "Types/TypeName2.json"
}
],
"post-type-install": [
{"action": "POST",
"object": "Data/DataFile.json",
"path": "/resources/DataFile"
}
]
if you have any parameters required to be used with the app we add this section:: 
 "agent_parameters": {
      "interval": {
        "description": "How often to execute a grind",
        "required": true,
        "type": "string",
        "default": "every 15 minutes",
        "position": 1
      }
    }
  },
  "autoUpdateVersion": false
}

</code></pre>

<h3 id="description-of-package.json-contents">Description of package.json contents</h3>

<p><strong>name=&ldquo;HSappTemplate&rdquo; <em>required</em></strong></p>

<p>The name of your application must match the name of the profile</p>

<p><strong>&ldquo;version&rdquo;: &ldquo;0.0.1&rdquo; <em>required</em></strong></p>

<p>Ideally this is the version of your application that gets posted as versions show for Agent Application in the Agent Event Logs so keeping this version the same as your Agent Application that is published is highly recommended.</p>

<p><strong>&ldquo;title&rdquo;: &ldquo;Application Title&rdquo; <em>required</em></strong></p>

<p>This is the title that will show on the HotSchedules Store once you publish your application to the HotSchedules Store.</p>

<p><strong>&ldquo;description&rdquo;: &ldquo;Short Application Description.&rdquo; <em>required</em></strong></p>

<p>The description is the application description that will be displayed with the title for your application when displayed in the HotSchedules Store.  Description will be part of &ldquo;Learn More&rdquo; button. </p>

<p><strong>&ldquo;profile&rdquo;: {} <em>required</em></strong></p>

<p>The profile section contains the following required sections:</p>

<ul>
<li><p><strong>&ldquo;name&rdquo;: &ldquo;HSappTemplate&rdquo; <em>required</em> and must match name above</strong></p>

<p>The profile name must match the application name that is described in the main part of the package.json (see name=&ldquo;app-package-name&rdquo; <em>required</em> above)</p></li>
<li><p><strong>&ldquo;dml&rdquo;: {}</strong></p>

<p>DML=Data Manipulation Language and this section describes what operations you plan to use on the schema or types within your application.  Usually you define the type and what operations you want to allow on the type such as select, update, delete, insert and/or aggregate. How you describe your DML section depends on what types you access and how you access/manipulate them.</p></li>
</ul>

<p><strong>&ldquo;settings&rdquo;:{} <em>required</em></strong></p>

<p>The settings is the main section of package.json contains the following sections:</p>

<ul>
<li><p><strong>&ldquo;categories&rdquo;: [] <em>optional</em></strong></p>

<p>A list of comma separated categories your application would fit into. The categories array allows you to give the HotSchedules Store taxonomical information about how your app relates to other applications. 
Examples include financial, inventory, management</p></li>
<li><p><strong>&ldquo;publisher&rdquo;: &ldquo;your company&rdquo; <em>required</em></strong></p>

<p>This is the name of your company or your name if you are self-represented.</p></li>
<li><p><strong>&ldquo;npm_package_name&rdquo;: &ldquo;app-package-name&rdquo; <em>required if building an Agent App or Job App</em></strong></p></li>
<li><p><strong>&ldquo;related-apps&rdquo;: [] <em>optional</em></strong>
Define the array of related applications as a comma separated based on the application(s)&rsquo; global package name. 
Example: 
    &ldquo;related-apps&rdquo;: [
        &ldquo;bodhi.aloha-app-transactions&rdquo;,
        &ldquo;bodhi.aloha-app-store&rdquo;
        ]</p></li>
<li><p><strong>&ldquo;offline&rdquo;: false <em>Required for mobile application</em></strong> </p>

<p>Offline is for mobile applications and tells the mobile container (HotSchedules Passbook). Offline controls whether the container will cache application information for offline use. If offline=true and the user launches the application, any data that was previously loaded will be available when the device is offline. This will also enable queuing of data to write to the Bodhi Cloud if the app has write permissions.  </p></li>
<li><p><strong>&ldquo;navigationBar&rdquo;: &ldquo;auto&rdquo;</strong></p>

<p>NavigationBar is for mobile applications and tells the mobile container (HotSchedules Passbook) to automatically use the built in navigation bar.</p></li>
<li><p><strong>&ldquo;public_path&rdquo;: &ldquo;public&rdquo; <em>required</em></strong></p>

<p>Public path is the folder that hold any screenshots, icons, and/or type definitions.  The Public Path is a location off of root of your application that allows developers to save items that should be publicly visible and available. The Public Path folder should contain screenshots and Icons that the global app store can use. The global_store_icon as well as the screenshots settings objects should all be relative paths to the public path.   </p></li>
<li><p><strong>&ldquo;global_store_icon&rdquo;: &ldquo;public/icon.png&rdquo; <em>required</em></strong></p>

<p>In the settings section, Global Store Icon is your icon for your application.</p></li>
<li><p><strong>&ldquo;location&rdquo;: &ldquo;S3&rdquo; <em>optional</em></strong></p>

<p>In the settings section, you define where your published app resides (S3 or artifactory).  S3 is the preferred location.  The Agent Apps used to use &ldquo;storage&rdquo;: &ldquo;s3&rdquo;, so that needs to be included in the settings sections as well for agent apps to compatibility.</p></li>
<li><p><strong>&ldquo;type&rdquo;: &ldquo;mobile&rdquo; <em>required</em></strong></p>

<p>In the settings section, you define the type of application (job, agent, mobile or web) you are publishing.  The &ldquo;type&rdquo;=&ldquo;job&rdquo; define your application to run inside job engine through Job Engine Manager.  The &ldquo;type&rdquo;=&ldquo;agent&rdquo; defines your application to run with the agent based on a defined role.  The &ldquo;type&rdquo;=&ldquo;mobile&rdquo; defines your application to run in a mobile container usually HotSchedules Passbook.  The &ldquo;type&rdquo;=&ldquo;web&rdquo; defines your application to run as a web application. </p></li>
<li><p><strong>&ldquo;new_type_required&rdquo;: true <em>optional</em></strong></p>

<p>In the settings section, if you are adding new types as described below, then this flag should be set to true. new_type_required tells the installer of the app in the global app store if the app will run &lsquo;out of the box&rsquo; or if new custom types need to be installed on the namespace. <em>NOTE:: if new_type_required=true, troubleshooting</em>url should be required_</p></li>
<li><p><strong>troubleshooting_url=&#39;http://tools.bodhi.space/xxxx&rsquo; <em>NOTE:: if new_type_required=true, troubleshooting</em>url should be required_</strong></p>

<p>The troubleshooting_url is the URL where the customer can find additional information about how to install custom types on their namespace to get an app to function correctly. This can also be used to FAQ&rsquo;s or any other outbound troubleshooting you would like to provide to your customers.</p></li>
</ul>

<p><strong>agent_parameters/job_parameters</strong></p>

<p>Depending on your application needs, you may want to have parameters setup for your applications.  Both Agent and Job applications can take parameters.  The agent/job_parameters contain information about any parameters that the agent or job requires to run.  They contain data_dir formatted information containing description, a required flag, type string and an optional position which is set will position the parameter in the order set 0, 1, 2, etc if not set then the parameter will be displayed in the order it&rsquo;s defined. Application parameters will be saved under settings so the application should use parameters from settings.</p>

<p>NOTE: The hidden parameter option will not be visible to the user in the installation process but will be written under the application settings.</p>

<p>The following are examples of parameters that can be set for agent or the job applications respectively:</p>

<p>Agent Parameters example:</p>
<pre class="highlight plaintext"><code>Example of agent parameters that can be defined for an agent application:

    "agent_parameters": {
      "config_file_path": {
        "description": "Config file location",
        "required": true,
        "type": "string",
        "default": "",
        "setting": "config_file_path"
      },
      "data_dir": {
        "description": "Folder location to save database files for the agent app",
        "required": true,
        "type": "string",
        "default": "C:/bodhiAgent/node_modules/merit-agent-labor/_xmloutput/",
        "setting": "data_dir"
      },
      "number_of_days_to_query": {
        "description": "Limit query to this number of days",
        "required": true,
        "type": "integer",
        "default": 60,
        "setting": "number_of_days_to_query"
      },
      "interval": {
        "description": "How often to execute a grind",
        "required": true,
        "type": "string",
        "default": "every 12 hours",
        "setting": "interval"
      },
      "local_storage_ignore_flag": {
        "description": "Ignore local storage and write all data",
        "required": true,
        "type": "boolean",
        "default": false,
        "setting": "local_storage_ignore_flag"
      }
    }
</code></pre>

<ul>
<li>All Parameters have the following 
This example sets up four parameters: timing_expression, brink_location, accessToken and uri.</li>
</ul>
<pre class="highlight plaintext"><code>Job Parameters example:
    "job_parameters": {
      "timing_expression": {
        "description": "How often to execute a job",
        "repeat": true,
        "type": "string",
        "default": "60 minutes"
      },
      "brink_location": {
        "description": "The alpha numeric string provided by the Brink POS API to identify the store location, e.g. tSm8y1TMSk7J4ZMyQBpeTg==",
        "type": "string",
        "required": true,
        "setting": "brink_location"
      },
      "accessToken": {
        "description": "The alpha numeric string provided by the Brink POS API to authenticate the user",
        "type": "string",
        "required": true,
        "setting": "accessToken"
      },
      "uri": {
        "description": "The url for the Brink POS API service e.g. https://api2.brinkpos.net/",
        "type": "string",
        "required": true,
        "setting": "uri"
      }
    }
</code></pre>

<p><strong>offline=true/false</strong>  </p>

<p>Offline controls whether the container will cache application information for offline use. If offline=true and the user launches the application, any data that was previously loaded will be available when the device is offline. This will also enable queuing of data to write to the IoT Platform if the application has write permissions.</p>

<p><strong>single_container_app=true/false</strong>  </p>

<p>single_container_app tells the container know whether the app should be displayed with a menu (a collection of apps) or as a standalone single app.
Bodhi Mobile has single_container_app = false. Bodhi Reveal has single_container_app = true</p>

<p><strong>hide_from_global_store=true/false</strong>  </p>

<p>hide_from_global_store controls whether the app is available to the general public to see in the global app store. Apps like Settings which cannot be removed should have hide_from_global_store=true</p>

<p><strong>new_type_required=true/false</strong>  </p>

<p>new_type_required tells the installer of the app in the global app store if the app will run &#39;out of the box&rsquo; or if new custom types need to be installed on the namespace.
NOTE:: if new_type_required=true, troubleshooting_url should be required</p>

<p><strong>screenshots{}</strong> </p>

<p>The screenshots array contains relative paths to screenshots which the Global App Store will use for display purposes. These files should be included in the app folder that is published and the path should be relative to the public_path.</p>

<p><strong>data_dir:{}</strong></p>

<p>The data_dir formatted information contains a description, a required flag, type string and an optional position which is set will position the parameter in the order set 0, 1, 2, etc if not set then the parameter will be displayed in the order it&rsquo;s defined.</p>

<p><strong>&ldquo;autoUpdateVersion&rdquo;: &ldquo;false&rdquo;</strong></p>

<p>This flag prevents autoUpdate version of the app each time you publish.  If you mark this false, you need to manually bump the version of the app each time you update it.  </p>

<p><strong>Example Type Definition</strong></p>

<p>This is an example of an enumeration, embedded_type and custom_type.  </p>

<p><em>NOTE:</em> All enumerations must be declared first, embedded_type must be after enumerations and custom_types have to be defined after enumerations and embedded_types: This example shows the objects as folders under the application&rsquo;s root directory.  This is where you define your json for each type.  There is a one to one correspondence of the type declared in package.json to the json defining that type in the folder under the application.</p>
<pre class="highlight plaintext"><code>Defining your custom schema/types example:
"install": {
"new": {
"model": [
{
"type": "enumeration",
"name": "TypeName",
"object": "Enumerations/TypeName.json"
},
{
"type": "embedded_type",
"name": "InventoryPurchaseOrder",
"object": "Types/InventoryPurchaseOrder.json"
},
{ "type": "custom_type",
"name": "TypeName2",
"object": "Types/TypeName2.json"
}
],
"post-type-install": [
{"action": "POST",
"object": "Data/DataFile.json",
"path": "/resources/DataFile"
}
]
</code></pre>

<p><strong>Adding Scripts and Versioning: &ldquo;versions&rdquo;: [..]</strong></p>

<p>To make an application script available set the following in the settings section of your package.json:</p>

<ul>
<li>version - current script version (might be bound to the current application version)</li>
<li>bundle - a jar name (by default it is &ldquo;script-<version>.jar&rdquo;)</li>
<li>pre-type-install - a marker for pre-install script presence. If this tag is absent - pre-install script will not be executed.</li>
<li>post-type-install - a marker for post-install script presence. If this tag is absent - post-install script will not be executed.</li>
<li>main - fully qulified script class name (by default it is com.bodhi.vertx.appinstaller.script.PreInstall for pre install scripts and com.bodhi.vertx.appinstaller.script.PostInstall for post install scripts:</li>
<li>Example json can be found to in the javascript section &gt;&gt;&gt;&gt;&gt;&gt;</li>
</ul>
<pre class="highlight plaintext"><code>Template for adding scripts/versions to package.json
versions:[
{
    "version": "&lt;script_version&gt;",
    "bundle": "&lt;jar_name&gt;",
    "pre-type-install": {
      "main": "&lt;main_class_name&gt;"
    },
    "post-type-install": {
      "main": "&lt;main_class_name&gt;"
    }
]
</code></pre>
<pre class="highlight plaintext"><code>Example of versions/scripts using seed-data:
    "versions": [
      {
        "bundle": "installer.jar", 
        "post-type-install": {}, 
        "pre-type-install": {}, 
        "seed-data": [
          {
            "action": "POST", 
            "object": "Data/measurements.json", 
            "path": "/resources/InventoryUnitOfMeasure"
          }, 
          {
            "action": "POST", 
            "object": "Data/conversions.json", 
            "path": "/resources/InventoryUomConversion"
          }
        ], 
        "version": "new"
      }, 
      {
        "bundle": "upgrade-3.0.0.jar", 
        "post-type-install": {
          "main": "com.bodhi.vertx.appinstaller.script.DeveloperScript"
        }, 
        "version": "2.7.19"
      }
    ]
</code></pre>

          <h1 id="hotschedules-iot-platform-mobile-api">HotSchedules IoT Platform Mobile API</h1>

<h2 id="overview">Overview</h2>

<p>The <strong><a href="http://mobileapi.bodhi.space">HotSchedules IoT Platform Mobile API</a></strong> provides application developers access to native device features for use in web applications. These features are typically unavailable in the HTML5 specification, not uniformly supported across all mobile browsers or improve on the orginal HTML5 spec. In some cases new features have been added that combine several device characteristics into one, for example bar code scanning uses camera storage and image recognition.</p>

<p>There is only one API required to deliver applications on Android IOS mobile devices.</p>

<p>The Bodhi Mobile API provides interface to the native features of a mobile device across iOS and Android.</p>

<p>See descriptions and info below:: (For full implementation details, see our detailed docs on </p>

<p><strong><a href="http://mobileapi.bodhi.space">Bodhi Mobile API</a></strong></p>

          <h2 id="getting-started">Getting Started</h2>

<p>HotSchedules Passbook is a mobile application than allows users to access their data on any mobile device.</p>

<p>With HotSchedules Passbook for <a href="https://itunes.apple.com/us/app/bodhi-mobile/id967184526?mt=8">IOS</a> and <a href="https://market.android.com/details?id=com.bodhi.mobile.android">Android</a> you can access and publish applications accessing sales, labor and metrics data.  HotSchedules Passbook allows hybrid applications to be deployed and immediately live in HotSchedules Passbook.  </p>

<h3 id="building-your-mobile-application">Building Your Mobile Application</h3>

<p>With HotSchedules Passbook you can build Native, HTML5 or Hybrid applications.  </p>

<ul>
<li>To access the native components, the <a href="http://mobileapi.bodhi.space">HotSchedules IoT Platform Mobile API</a> must be used which allows the HotSchedules Passbook mobile application developer build to just one api and deploy a single application that can run on both Android and IOS.<br></li>
<li>HTML5 apps use standard web techologies which have a write-once-run-anywhere approach to mobile development.</li>
<li>Hybrid apps use both native components and HTML5, using the <a href="http://mobileapi.bodhi.space">Mobile API</a> that we provide, you can develop a single hybrid app accessing native components through the api without having to deal with the native components themselves.  These APIs have been fully tested on multiple devices and are certified by HotSchedules. By using the <a href="http://mobileapi.bodhi.space">Mobile API</a> you can write-once-run-anywhere for all our supported native components including camera, calendar, geolocation, etc..</li>
</ul>

<h5 id="the-easiest-way-to-get-your-app-out-to-customers">The easiest way to get your app out to customers</h5>

<ul>
<li><p>Download the HSAppTemplate project to define your application to be published to the HotSchedules IoT Platform and HotSchedules Passbook. </p></li>
<li><p>Build your application based on <a href="http://mobileapi.bodhi.space">HotSchedules IoT Platform Mobile API</a> and/or HTML5 features  </p></li>
<li><p>Zip up your application</p></li>
<li><p>Publish using the <a href="https://developer.bodhi.space/developer">HotSchedules Developer Portal</a></p></li>
</ul>

<p><a href="https://itunes.apple.com/us/app/bodhi-mobile/id967184526?mt=8"><img src="../../images/btn_itunes.png"></a>
<a href="https://market.android.com/details?id=com.bodhi.mobile.android"><img src="../../images/btn_play.png"></a></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
